"use strict";(self.webpackChunkn2_compile=self.webpackChunkn2_compile||[]).push([[8013],{87888:(e,n,t)=>{t.d(n,{Kj:()=>r,Sn:()=>i});const i={redo:"r",undo:"z",center:"Alt",constraint:"Shift",cancel:"Escape",delete:["Backspace","Delete"],complete:"Enter",vertexAdd:"f",pan:" "},r={toggle:"Control"}},38054:(e,n,t)=>{t.d(n,{Ju:()=>d,SN:()=>c,Ue:()=>l,al:()=>a,d9:()=>u,j7:()=>p,uo:()=>s});var i=t(71353),r=t(55946),o=t(74509);function l(e,n,t){return(0,i.f)(e,n,t)}function s(e){return e}function a(e,n,t){return(0,i.f)(e,n,t)}function u(e){return(0,i.g)(e)}function p(e,n,t){let{coordinateHelper:i,elevationInfo:r}=t;return e?c(i.vectorToDehydratedPoint(e,h),n,r):null}function c(e,n,t){var r,l;if(null==e)return null;if(null==n)return(0,i.f)(e.x,e.y,null!==(r=e.z)&&void 0!==r?r:0);if("2d"===n.type)return(0,i.f)(e.x,e.y,0);const s=null!==(l=(0,o.vQ)(n,e,t,o.jG))&&void 0!==l?l:0;return(0,i.f)(e.x,e.y,s)}function d(e,n){return(0,r.T)(e[0],e[1],e[2],n)}const h=(0,r.T)(0,0,0,null)},76014:(e,n,t)=>{t.d(n,{c:()=>p});var i=t(27366),r=t(51995),o=t(46784),l=t(49861),s=t(69912);let a=class extends o.wq{constructor(){super(...arguments),this.enabled=!0}};(0,i._)([(0,l.Cb)({type:Boolean})],a.prototype,"enabled",void 0),a=(0,i._)([(0,s.j)("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],a);let u=class extends o.wq{constructor(e){super(e),this.lineSnapper=new a,this.parallelLineSnapper=new a,this.rightAngleSnapper=new a,this.rightAngleTriangleSnapper=new a,this.shortLineThreshold=15,this.distance=5,this.pointThreshold=1e-6,this.intersectionParallelLineThreshold=1e-6,this.parallelLineThreshold=1e-6,this.verticalLineThreshold=.1,this.touchSensitivityMultiplier=1.5,this.pointOnLineThreshold=1e-6,this.orange=new r.Z([255,127,0]),this.orangeTransparent=new r.Z([255,127,0,.5]),this.lineHintWidthReference=3,this.lineHintWidthTarget=3,this.lineHintFadedExtensions=.3,this.parallelLineHintWidth=2,this.parallelLineHintLength=24,this.parallelLineHintOffset=1.5,this.rightAngleHintSize=24,this.rightAngleHintOutlineSize=1.5,this.satisfiesConstraintScreenThreshold=1}};(0,i._)([(0,l.Cb)({type:a,constructOnly:!0,nonNullable:!0,json:{write:!0}})],u.prototype,"lineSnapper",void 0),(0,i._)([(0,l.Cb)({type:a,constructOnly:!0,nonNullable:!0,json:{write:!0}})],u.prototype,"parallelLineSnapper",void 0),(0,i._)([(0,l.Cb)({type:a,constructOnly:!0,nonNullable:!0,json:{write:!0}})],u.prototype,"rightAngleSnapper",void 0),(0,i._)([(0,l.Cb)({type:a,constructOnly:!0,nonNullable:!0,json:{write:!0}})],u.prototype,"rightAngleTriangleSnapper",void 0),(0,i._)([(0,l.Cb)({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],u.prototype,"shortLineThreshold",void 0),(0,i._)([(0,l.Cb)({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],u.prototype,"distance",void 0),(0,i._)([(0,l.Cb)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],u.prototype,"pointThreshold",void 0),(0,i._)([(0,l.Cb)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],u.prototype,"intersectionParallelLineThreshold",void 0),(0,i._)([(0,l.Cb)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],u.prototype,"parallelLineThreshold",void 0),(0,i._)([(0,l.Cb)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],u.prototype,"verticalLineThreshold",void 0),(0,i._)([(0,l.Cb)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],u.prototype,"touchSensitivityMultiplier",void 0),(0,i._)([(0,l.Cb)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],u.prototype,"pointOnLineThreshold",void 0),(0,i._)([(0,l.Cb)({type:r.Z,nonNullable:!0})],u.prototype,"orange",void 0),(0,i._)([(0,l.Cb)({type:r.Z,nonNullable:!0})],u.prototype,"orangeTransparent",void 0),(0,i._)([(0,l.Cb)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],u.prototype,"lineHintWidthReference",void 0),(0,i._)([(0,l.Cb)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],u.prototype,"lineHintWidthTarget",void 0),(0,i._)([(0,l.Cb)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],u.prototype,"lineHintFadedExtensions",void 0),(0,i._)([(0,l.Cb)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],u.prototype,"parallelLineHintWidth",void 0),(0,i._)([(0,l.Cb)({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],u.prototype,"parallelLineHintLength",void 0),(0,i._)([(0,l.Cb)({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],u.prototype,"parallelLineHintOffset",void 0),(0,i._)([(0,l.Cb)({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],u.prototype,"rightAngleHintSize",void 0),(0,i._)([(0,l.Cb)({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],u.prototype,"rightAngleHintOutlineSize",void 0),(0,i._)([(0,l.Cb)({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],u.prototype,"satisfiesConstraintScreenThreshold",void 0),u=(0,i._)([(0,s.j)("esri.views.interactive.snapping.Settings.Defaults")],u);const p=new u},34019:(e,n,t)=>{t.d(n,{N:()=>i});class i{constructor(e){this.vertexHandle=null,this.excludeFeature=null,this.visualizer=null,this.selfSnappingZ=null,this.editGeometryOperations=e.editGeometryOperations,this.elevationInfo=e.elevationInfo,this.pointer=e.pointer,this.vertexHandle=e.vertexHandle,this.excludeFeature=e.excludeFeature,this.feature=e.feature,this.visualizer=e.visualizer,this.selfSnappingZ=e.selfSnappingZ}get coordinateHelper(){return this.editGeometryOperations.data.coordinateHelper}get spatialReference(){return this.coordinateHelper.spatialReference}}},80371:(e,n,t)=>{var i;t.d(n,{B:()=>i}),function(e){e[e.FEATURE=1]="FEATURE",e[e.SELF=2]="SELF",e[e.ALL=3]="ALL"}(i||(i={}))},80151:(e,n,t)=>{t.d(n,{W:()=>d});var i=t(92026),r=t(66978),o=t(94172),l=t(70178),s=t(37818),a=t(74509),u=t(5693),p=t(34019),c=t(93463);function d(e){let{predicate:n=(()=>!0),snappingManager:t,snappingContext:s,updatingHandles:d,useZ:y=!0}=e;const b=new u.hM;if(null==t)return{snappingStep:[v,b],cancelSnapping:v};let m,x=null,w=null,N=null;const S=()=>{var e;x=(0,i.IM)(x),t.doneSnapping(),null!==(e=w)&&void 0!==e&&e.frameTask.remove(),w=null,m=(0,i.hw)(m),N=null},E=(L=t,T=y,C=b,(0,r.Ds)((async(e,n)=>{let{frameTask:t,point:i,scenePoint:r,context:o,event:s,delta:a,getLastState:u}=e;const p=await t.schedule((()=>L.snap({point:i,scenePoint:r,context:o,signal:n})),n);if(p.valid){let e=await t.schedule((()=>p.apply()),n);const r=u();null!=r.point&&i!==r.point&&(e=L.update({point:r.point,scenePoint:r.scenePoint,context:o})),null!=r.updatePoint&&(0,l.k)(e,r.updatePoint)||(g(s.mapEnd,e,a,T),C.execute(s))}})));var L,T,C;let j=null,H=null,P=null;return{snappingStep:[e=>{if(!n(e))return e;const{action:i}=e;if("start"===i){const{info:n}=e,i=function(e){return"3d"===e.type?e.resourceController.scheduler.registerTask(c.T8.SNAPPING):c.sq}(t.view);if(w=function(e,n,t){return{context:new p.N({editGeometryOperations:e.editGeometryOperations,elevationInfo:e.elevationInfo,pointer:e.pointer,vertexHandle:null!=n.info?n.info.handle:null,excludeFeature:e.excludeFeature,feature:e.feature,visualizer:e.visualizer}),originalPos:null!=n.snapOrigin?e.coordinateHelper.vectorToDehydratedPoint(n.snapOrigin):n.mapStart,originalScenePos:null!=n.scenePoints?n.scenePoints.sceneStart:null,frameTask:t}}(s,e,i),w.context.selfSnappingZ=null,!y&&null!=n){var l;const e=function(e,n){if(!e.hasZ())return null;const t=n.vertices;let i=null;for(const r of t){const n=e.getZ(r.pos);if(null!=i&&null!=n&&Math.abs(n-i)>1e-6)return null;null==i&&(i=n)}return i}(s.coordinateHelper,n.handle.component);null!=e&&(w.context.selfSnappingZ={value:e,elevationInfo:null!==(l=s.elevationInfo)&&void 0!==l?l:a.jG})}}if(null!=w){const{context:n,originalScenePos:l,originalPos:s}=w,{mapEnd:a,mapStart:u,scenePoints:p}=e,c=h(s,f(a,u)),v=f(u,s),b={...e,action:"update"},S=w.context,L=function(e,n){return null==e||null==n?null:h(e,f(n.sceneEnd,n.sceneStart))}(l,p),T=t.update({point:c,scenePoint:L,context:n});if(P=T,g(a,T,v,y),j=c,H=L,"end"!==i){const{frameTask:e}=w;null==x&&(x=new AbortController),N=n=>{d.addPromise((0,r.R8)(E({frameTask:e,event:b,context:S,point:c,scenePoint:L,delta:v,getLastState:()=>({point:j,scenePoint:H,updatePoint:n.forceUpdate?null:P})},x.signal)))},N({forceUpdate:!1}),null==m&&(m=(0,o.YP)((()=>t.options.effectiveEnabled),(()=>{var e;return null===(e=N)||void 0===e?void 0:e({forceUpdate:!0})})))}}return"end"===i&&S(),e},b],cancelSnapping:e=>(S(),e)}}function h(e,n){let[t,i,r]=n;const o=(0,s.WG)(e);return o.x+=t,o.y+=i,o.hasZ&&(o.z+=r),o}function f(e,n){const t=e.hasZ&&n.hasZ?e.z-n.z:0;return[e.x-n.x,e.y-n.y,t]}function g(e,n,t,i){let[r,o,l]=t;e.x=n.x+r,e.y=n.y+o,i&&e.hasZ&&n.hasZ&&(e.z=n.z+l)}function v(e){return e}},38561:(e,n,t)=>{t.d(n,{a:()=>u});var i=t(42537),r=t(90609),o=t(53397),l=t(5916),s=t(61309),a=t(41216);class u{draw(e,n){const t=this._getUniqueHints(e),u=this.sortUniqueHints(t),p=[];for(const i of u)i instanceof r.w&&p.push(this.visualizeIntersectionPoint(i,n)),i instanceof o.w&&p.push(this.visualizeLine(i,n)),i instanceof l.L&&p.push(this.visualizeParallelSign(i,n)),i instanceof a.y&&p.push(this.visualizeRightAngleQuad(i,n)),i instanceof s.n&&p.push(this.visualizePoint(i,n));return(0,i.AL)(p)}sortUniqueHints(e){return e}_getUniqueHints(e){const n=[];for(const t of e){let e=!0;for(const i of n)if(t.equals(i)){e=!1;break}e&&n.push(t)}return n}}},90609:(e,n,t)=>{t.d(n,{w:()=>l});var i=t(11186),r=t(80371),o=t(55054);class l extends o.r{constructor(e,n){super(n,arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.B.ALL),this.intersectionPoint=e}equals(e){return e instanceof l&&(0,i.h)(this.intersectionPoint,e.intersectionPoint)}}},53397:(e,n,t)=>{t.d(n,{w:()=>l});t(93169),t(32718);var i=t(11186),r=t(80371),o=t(55054);class l extends o.r{constructor(e,n,t,i){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:r.B.ALL,l=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];super(i,o),this.type=e,this.lineStart=n,this.lineEnd=t,this.fadeLeft=l,this.fadeRight=s}equals(e){return e instanceof l&&this.type===e.type&&(0,i.h)(this.lineStart,e.lineStart)&&(0,i.h)(this.lineEnd,e.lineEnd)&&this.fadeLeft===e.fadeLeft&&this.fadeRight===e.fadeRight}get length(){return(0,i.o)(this.lineStart,this.lineEnd)}}},5916:(e,n,t)=>{t.d(n,{L:()=>l});t(93169),t(32718);var i=t(11186),r=t(80371),o=t(55054);class l extends o.r{constructor(e,n,t){super(t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.B.ALL),this.lineStart=e,this.lineEnd=n}equals(e){return e instanceof l&&(0,i.h)(this.lineStart,e.lineStart)&&(0,i.h)(this.lineEnd,e.lineEnd)}}},61309:(e,n,t)=>{t.d(n,{n:()=>o});var i=t(11186),r=t(55054);class o extends r.r{constructor(e,n,t){super(n,t),this.point=e}equals(e){return e instanceof o&&(0,i.h)(this.point,e.point)}}},41216:(e,n,t)=>{t.d(n,{y:()=>l});t(93169),t(32718);var i=t(11186),r=t(80371),o=t(55054);class l extends o.r{constructor(e,n,t,i){super(i,arguments.length>4&&void 0!==arguments[4]?arguments[4]:r.B.ALL),this.previousVertex=e,this.centerVertex=n,this.nextVertex=t}equals(e){return e instanceof l&&(0,i.h)(this.previousVertex,e.previousVertex)&&(0,i.h)(this.centerVertex,e.centerVertex)&&(0,i.h)(this.nextVertex,e.nextVertex)}}},55054:(e,n,t)=>{t.d(n,{r:()=>i});class i{constructor(e,n){this.isDraped=e,this.domain=n}}},64674:(e,n,t)=>{t.d(n,{Bb:()=>g,ML:()=>x,Ob:()=>w,_j:()=>m,fG:()=>v,lQ:()=>y,n0:()=>N,rh:()=>b,ze:()=>i});var i,r,o=t(94172),l=t(92377),s=t(76672),a=t(86710),u=t(11186),p=t(55946),c=t(21149),d=t(1614),h=t(87888),f=t(38054);function g(e,n){const t=e.x-n.x,i=e.y-n.y;return t*t+i*i}function v(e,n){return Math.sqrt(g(e,n))}function y(e,n){n.sort(((n,t)=>(0,u.a)(n.targetPoint,e)-(0,u.a)(t.targetPoint,e)))}function b(e,n,t){let{point:i,distance:r,returnEdge:o,vertexMode:u,coordinateHelper:{spatialReference:d},filter:h}=e;return t=null!=t?t.clone():new c.Z({where:"1=1"}),h&&(t.geometry=h.geometry,t.distance=h.distance,t.spatialRelationship=h.spatialRelationship,t.where=(0,s._)(t.where,h.where),t.timeExtent=(0,a.Ov)(t.timeExtent,h.timeExtent),t.objectIds=function(e,n){return e||n?n?e?Array.from((0,l.jV)(new Set(e),new Set(n))):n:e:null}(t.objectIds,h.objectIds)),{point:(0,p.T)(i[0],i[1],i[2],d.toJSON()),mode:n,distance:r,returnEdge:o,vertexMode:u,query:t.toJSON()}}function m(e,n,t){return{left:(0,f.j7)(e.leftVertex.pos,n,t),right:(0,f.j7)(e.rightVertex.pos,n,t)}}function x(e){return e.createQuery()}function w(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};const t=(0,o.YP)((()=>({view:e.view,snappingOptions:e.snappingOptions})),(t=>{let{view:i,snappingOptions:r}=t;const o="snapping-toggle",l=d.f.TOOL;if(e.removeHandles(o),i&&null!=r){const t=[i.on("key-down",(e=>{e.key!==h.Kj.toggle||e.repeat||(r.enabledToggled=!0,n())}),l),i.on("key-up",(e=>{e.key===h.Kj.toggle&&(r.enabledToggled=!1,n())}),l),i.on("pointer-move",(e=>{const t=e.native.ctrlKey;r.enabledToggled!==t&&(r.enabledToggled=t,n())}),l)];e.addHandles(t,o)}}),o.tX);e.addHandles(t)}function N(e){var n;return null!=e&&"object"==typeof e&&"declaredClass"in e&&"esri.WebMap"===e.declaredClass&&"utilityNetworks"in e&&!(null===e||void 0===e||null===(n=e.utilityNetworks)||void 0===n||!n.length)}(r=i||(i={}))[r.TARGET=0]="TARGET",r[r.REFERENCE=1]="REFERENCE",r[r.REFERENCE_EXTENSION=2]="REFERENCE_EXTENSION"}}]);
//# sourceMappingURL=8013.37d0b43f.chunk.js.map