{"version":3,"file":"static/js/7452.ae59112e.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/3d/layers/BuildingSublayerView3D.js","../node_modules/@arcgis/core/views/3d/layers/i3s/BuildingFilterUtil.js","../node_modules/@arcgis/core/views/layers/BuildingComponentSublayerView.js","../node_modules/@arcgis/core/views/3d/layers/BuildingComponentSublayerView3D.js","../node_modules/@arcgis/core/views/layers/BuildingSceneLayerView.js","../node_modules/@arcgis/core/views/3d/layers/BuildingSceneLayerView3D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Evented.js\";import{IdentifiableMixin as r}from\"../../../core/Identifiable.js\";import{EsriPromiseMixin as s}from\"../../../core/Promise.js\";import{property as i}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";const p=(p,l)=>{let n=class extends(s(r(t.EventedMixin(p)))){constructor(e){super(e),this.sublayer=null,this.parent=null,this.view=null}initialize(){}get suspended(){return!this.canResume()}get updating(){return!this.suspended&&this.isUpdating()}get visible(){return!!this.sublayer?.visible}set visible(e){this._overrideIfSome(\"visible\",e)}get fullOpacity(){const e=e=>null!=e?e:1;return e(this.sublayer?.opacity)*e(this.parent?.fullOpacity)}canResume(){return!this.parent?.suspended&&this.view?.ready&&this.visible||!1}isUpdating(){return!1}};return e([i()],n.prototype,\"sublayer\",void 0),e([i()],n.prototype,\"parent\",void 0),e([i({readOnly:!0})],n.prototype,\"suspended\",null),e([i({type:Boolean,readOnly:!0})],n.prototype,\"updating\",null),e([i()],n.prototype,\"view\",void 0),e([i()],n.prototype,\"visible\",null),e([i()],n.prototype,\"fullOpacity\",null),n=e([o(\"esri.views.3d.layers.BuildingSublayerView3D\")],n),n};export{p as BuildingSublayerView3DMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{clone as e}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{createMaterialFromEdges as r}from\"../support/edgeUtils.js\";import{ColorMixModeEnum as o}from\"../support/symbolColorUtils.js\";var a;!function(e){e[e.Solid=0]=\"Solid\",e[e.WireFrame=1]=\"WireFrame\",e[e.XRay=2]=\"XRay\"}(a||(a={}));const l=.15,t=.5*l;function i(e){switch(e.filterMode.type){case\"solid\":return{mode:a.Solid};case\"wire-frame\":return{mode:a.WireFrame,edgeMaterial:r(e.filterMode.edges,{})};case\"x-ray\":return{mode:a.XRay}}}function c(e,r){if(null==r)return e.color[3]=0,e.edgeMaterial=null,void(e.pickable=!1);switch(r.mode){case a.Solid:return;case a.WireFrame:return e.color[3]=0,e.edgeMaterial=r.edgeMaterial,void(e.pickable=!1);case a.XRay:return e.color[0]=1,e.color[1]=1,e.color[2]=1,e.color[3]*=l,e.colorMixMode=o.Replace,e.castShadows=!1,e.pickable=!1,void(e.edgeMaterial=n(e.edgeMaterial))}}function n(e){return null==e?null:(d.lastMaterial!==e&&(d.cachedMaterial=s(e),d.lastMaterial=e),d.cachedMaterial)}function s(r){const o=e(r.color);return o[3]*=t,{...r,color:o}}const d={cachedMaterial:null,lastMaterial:null};export{a as FilterModeEnum,c as applyFilterMode,i as parseFilterMode};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Accessor.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import\"../../core/accessorSupport/interfaces.js\";import\"../../core/accessorSupport/tracking/Flags.js\";import\"../../core/Warning.js\";import\"../../core/Error.js\";class o extends e{constructor(){super(...arguments),this.sublayer=null}get updating(){return!1}get suspended(){return!1}get availableFields(){return[]}get filter(){return null}set filter(r){throw new Error(\"Not implemented\")}queryFeatures(r,e){throw new Error(\"Not implemented\")}queryObjectIds(r,e){throw new Error(\"Not implemented\")}queryFeatureCount(r,e){throw new Error(\"Not implemented\")}createQuery(){throw new Error(\"Not implemented\")}queryExtent(r,e){throw new Error(\"Not implemented\")}highlight(r){throw new Error(\"Not implemented\")}}r([t()],o.prototype,\"sublayer\",void 0),r([t()],o.prototype,\"availableFields\",null),r([t()],o.prototype,\"filter\",null);export{o as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import r from\"../../../Graphic.js\";import t from\"../../../core/Error.js\";import i from\"../../../core/Logger.js\";import{destroyMaybe as s}from\"../../../core/maybe.js\";import{throwIfAborted as l,throwIfAbortError as n}from\"../../../core/promiseUtils.js\";import{syncAndInitial as a,initial as o}from\"../../../core/reactiveUtils.js\";import{property as u}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/RandomLCG.js\";import{subclass as d}from\"../../../core/accessorSupport/decorators/subclass.js\";import{WhereClause as p}from\"../../../core/sql/WhereClause.js\";import\"../../../layers/buildingSublayers/BuildingComponentSublayer.js\";import h from\"../../../layers/support/FeatureFilter.js\";import{fixFields as y,unpackFieldNames as c,populateMissingFields as f}from\"../../../layers/support/fieldUtils.js\";import m from\"../../../rest/support/Query.js\";import{BuildingSublayerView3DMixin as g}from\"./BuildingSublayerView3D.js\";import{I3SMeshView3D as F}from\"./I3SMeshView3D.js\";import{ForAllFeaturesMode as b}from\"./II3SMeshView3D.js\";import{applyFilterMode as _}from\"./i3s/BuildingFilterUtil.js\";import{createGetFeatureExtent as E}from\"./i3s/I3SGeometryUtil.js\";import{I3SMeshViewFilter as w}from\"./i3s/I3SMeshViewFilter.js\";import{I3SQueryEngine as x}from\"./i3s/I3SQueryEngine.js\";import{I3SQueryFeatureAdapter as S}from\"./i3s/I3SQueryFeatureAdapter.js\";import{I3SQueryFeatureStore as j}from\"./i3s/I3SQueryFeatureStore.js\";import{findFieldsCaseInsensitive as v,getIndexCrs as I}from\"./i3s/I3SUtil.js\";import{DefinitionExpressionSceneLayerView as Q}from\"./support/DefinitionExpressionSceneLayerView.js\";import{TemporalSceneLayerView as q}from\"./support/TemporalSceneLayerView.js\";import L from\"../../layers/BuildingComponentSublayerView.js\";import{hasPopupTemplate as R,getRequiredFields as V,getFetchPopupTemplate as U}from\"../../layers/support/popupUtils.js\";import{TaskPriority as A}from\"../../support/Scheduler.js\";let C=class extends(q(Q(F(g(L))))){constructor(){super(...arguments),this.type=\"building-component-sublayer-3d\",this.layerView=null,this._elevationContext=\"scene\",this._isIntegratedMesh=!1,this._supportsLabeling=!1,this.requiredFields=[],this.progressiveLoadFactor=1,this._queryEngine=null}get i3slayer(){return this.sublayer}get layerUid(){return this.sublayer.layer.uid}get sublayerUid(){return this.sublayer.uid}get layerId(){return this.sublayer.layer.id}get sublayerId(){return this.sublayer.id}get layerPopupEnabledAndHasTemplate(){return this.sublayer.popupEnabled&&R(this.sublayer,this.layerView?.view.popup?.defaultPopupTemplateEnabled)}initialize(){this._updatingHandles.add((()=>this.mergedFilter),(e=>{null!=e&&w.checkSupport(e)?null==this._i3sFilter?this._i3sFilter=new w({viewFilter:e,layerFieldsIndex:this.sublayer.fieldsIndex,loadAsyncModule:e=>this._loadAsyncModule(e),addSqlFilter:(e,r)=>this.addSqlFilter(e,r,this.logError),addTimeFilter:(e,r)=>this.addTimeFilter(e,r)}):this._i3sFilter.viewFilter=e:this._i3sFilter=s(this._i3sFilter)}),a),this._updatingHandles.add((()=>[this.sublayer.renderer,this.definitionExpressionFields,this.filterExpressionFields,this.timeFilterFields]),(()=>this._updateRequiredFields())),this._updatingHandles.add((()=>this.sublayer.renderer),(e=>this._rendererChange(e)),o);const e=()=>this._filterChange();this._updatingHandles.add((()=>this.parsedDefinitionExpression),e),this._updatingHandles.add((()=>this._i3sFilter?.sortedObjectIds),e),this._updatingHandles.add((()=>this._i3sFilter?.parsedWhereClause),e),this._updatingHandles.add((()=>this.getTimeFilterDependencies()),e),this._updatingHandles.add((()=>this.mergedFilter),e),this._updatingHandles.add((()=>[this._i3sFilter?.parsedGeometry,this.filter?.spatialRelationship]),(()=>this._geometryFilterChange())),this._updatingHandles.add((()=>this.parsedFilterExpressions),(()=>this._updateSymbologyOverride()),o),this.addResolvingPromise(this._updateRequiredFields())}get lodFactor(){return this.view.qualitySettings.sceneService.object.lodFactor}get parsedFilterExpressions(){return\"Overview\"!==this.sublayer.modelName&&this.layerView?this.layerView.filterExpressions.map((([e,r])=>{let t;try{t=p.create(e,this.sublayer.fieldsIndex)}catch(n){return i.getLogger(this).error(\"Failed to parse filterExpression: \"+n),null}if(!t.isStandardized)return i.getLogger(this).error(\"filterExpression is using non standard function\"),null;const s=[],l=t.fieldNames;return v(l,this.sublayer.fields,{missingFields:s}),s.length>0?(i.getLogger(this).error(`filterExpression references unknown fields: ${s.join(\", \")}`),null):[t,r]})).filter((e=>null!=e)):[]}get filter(){return this._get(\"filter\")}set filter(e){this._set(\"filter\",w.checkSupport(e)?e:null)}isUpdating(){return super.isUpdating()||(this._i3sFilter?.updating??!1)}_updateSymbologyOverride(){const e=this.parsedFilterExpressions;e.length>0?this._setSymbologyOverride(((r,t)=>{for(const[s,l]of e)try{if(s.testFeature(r))return _(t,l)}catch(i){this.logError(i)}return _(t,null)}),this.filterExpressionFields):this._setSymbologyOverride(null,null)}get filterExpressionFields(){return y(this.sublayer.fieldsIndex,this.parsedFilterExpressions.reduce(((e,[r])=>e.concat(r.fieldNames)),new Array))}get timeFilterFields(){const{timeExtent:e}=this,{timeInfo:r,fieldsIndex:t}=this.sublayer;if(null==e||null==r)return[];const{startField:i,endField:s}=r;return y(t,[i,s])}get availableFields(){const e=this.sublayer,r=e.fieldsIndex;let t=this.requiredFields;if(e.outFields||e.layer.outFields){const i=[...e.outFields||[],...e.layer.outFields||[]];t=[...c(r,i),...t]}return y(r,t)}_createLayerGraphic(e){const t=new r(null,null,e);return t.layer=this.sublayer.layer,t.sourceLayer=this.sublayer,t}canResume(){return super.canResume()&&(!this._controller||this._controller.rootNodeVisible)}async fetchPopupFeaturesFromGraphics(e,r){const t=this._validateFetchPopupFeatures(r);if(t)throw t;if(0===e.length)return[];const s=[],a=[],o=null!=this.sublayer.associatedLayer?await this.sublayer.associatedLayer.load(r):this.sublayer,u=c(this.sublayer.fieldsIndex,await V(o,U(this.sublayer,r)));l(r);const d=new Set;for(const i of e)f(u,i,d)?a.push(i):s.push(i);return 0===a.length?s:(null!=this.sublayer.associatedLayer&&await this.sublayer.associatedLayer.load().catch((()=>i.getLogger(this).warn(\"Failed to load associated feature layer. Displaying popup attributes from cached attributes.\"))),this.whenGraphicAttributes(a,Array.from(d)).catch((e=>(n(e),a))).then((e=>s.concat(e))))}async _updateRequiredFields(){const e=y(this.sublayer.fieldsIndex,[...this.sublayer.renderer?await this.sublayer.renderer.getRequiredFields(this.sublayer.fieldsIndex):[],...this.definitionExpressionFields,...this.filterExpressionFields,...this.timeFilterFields]);this._set(\"requiredFields\",e)}_validateFetchPopupFeatures(e){const{sublayer:r}=this,{popupEnabled:i}=r;return i?U(r,e)?void 0:new t(\"buildingscenelayerview3d:fetchPopupFeatures\",\"Layer does not define a popup template\",{sublayer:r}):new t(\"buildingscenelayerview3d:fetchPopupFeatures\",\"Popups are disabled\",{sublayer:r})}getFilters(){const e=super.getFilters();return this.addSqlFilter(e,this.parsedDefinitionExpression,this.logError),this._i3sFilter?.addFilters(e,this.view,this._controller.crsIndex,this._collection),e}createQuery(){const e={outFields:[\"*\"],returnGeometry:!1,outSpatialReference:this.view.spatialReference};return null!=this.filter?this.filter.createQuery(e):new m(e)}queryExtent(e,r){return this._ensureQueryEngine().executeQueryForExtent(this._ensureQuery(e),r?.signal)}queryFeatureCount(e,r){return this._ensureQueryEngine().executeQueryForCount(this._ensureQuery(e),r?.signal)}queryFeatures(e,r){return this._ensureQueryEngine().executeQuery(this._ensureQuery(e),r?.signal).then((e=>{if(!e?.features)return e;const r=this.sublayer,t=r.layer;for(const i of e.features)i.layer=t,i.sourceLayer=r;return e}))}queryObjectIds(e,r){return this._ensureQueryEngine().executeQueryForIds(this._ensureQuery(e),r?.signal)}_ensureQueryEngine(){return null==this._queryEngine&&(this._queryEngine=this._createQueryEngine()),this._queryEngine}_createQueryEngine(){const e=E(this.view.spatialReference,this.view.renderSpatialReference,this._collection);return new x({layerView:this,priority:A.FEATURE_QUERY_ENGINE,spatialIndex:new j({featureAdapter:new S({objectIdField:this.sublayer.objectIdField,attributeStorageInfo:this.sublayer.attributeStorageInfo,getFeatureExtent:e}),forAllFeatures:(e,r)=>this._forAllFeatures(((r,t,i)=>e({id:r,index:t,meta:i})),r,b.QUERYABLE),getFeatureExtent:e,sourceSpatialReference:I(this.sublayer),viewSpatialReference:this.view.spatialReference})})}_ensureQuery(e){return this._addDefinitionExpressionToQuery(null==e?this.createQuery():m.from(e))}};e([u()],C.prototype,\"i3slayer\",null),e([u()],C.prototype,\"layerView\",void 0),e([u()],C.prototype,\"lodFactor\",null),e([u({readOnly:!0})],C.prototype,\"parsedFilterExpressions\",null),e([u({type:h})],C.prototype,\"filter\",null),e([u()],C.prototype,\"_i3sFilter\",void 0),e([u({type:[String],readOnly:!0})],C.prototype,\"filterExpressionFields\",null),e([u({type:[String],readOnly:!0})],C.prototype,\"timeFilterFields\",null),e([u({type:[String],readOnly:!0})],C.prototype,\"requiredFields\",void 0),e([u({type:[String],readOnly:!0})],C.prototype,\"availableFields\",null),C=e([d(\"esri.views.3d.layers.BuildingComponentSublayerView3D\")],C);const O=C;export{O as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import\"../../core/accessorSupport/interfaces.js\";import\"../../core/accessorSupport/tracking/Flags.js\";import\"../../core/Warning.js\";import\"../../core/Error.js\";import e from\"./LayerView.js\";class s extends e{constructor(r){super(r),this.layer=null,this.sublayerViews=null}highlight(r){throw new Error(\"Not implemented\")}}r([o()],s.prototype,\"layer\",void 0),r([o()],s.prototype,\"sublayerViews\",void 0);export{s as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import r from\"../../../Graphic.js\";import s from\"../../../core/Accessor.js\";import{groupToMap as t}from\"../../../core/arrayUtils.js\";import i from\"../../../core/Collection.js\";import{handlesGroup as o}from\"../../../core/handleUtils.js\";import n from\"../../../core/Logger.js\";import{abortMaybe as l}from\"../../../core/maybe.js\";import{isAbortError as a,allSettledValues as u,throwIfAborted as p,createResolver as h}from\"../../../core/promiseUtils.js\";import{watch as c,syncAndInitial as y}from\"../../../core/reactiveUtils.js\";import{property as d}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import{subclass as g}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../layers/buildingSublayers/BuildingGroupSublayer.js\";import f from\"./BuildingComponentSublayerView3D.js\";import{BuildingSublayerView3DMixin as m}from\"./BuildingSublayerView3D.js\";import{LayerView3D as b}from\"./LayerView3D.js\";import{parseFilterMode as w}from\"./i3s/BuildingFilterUtil.js\";import{checkSpatialReference as V}from\"./i3s/I3SUtil.js\";import{updatingProgress as j}from\"../support/updatingProperties.js\";import _ from\"../../layers/BuildingSceneLayerView.js\";const C=m(s);let S=class extends(b(_)){constructor(e){super(e),this.type=\"building-scene-3d\",this.sublayerViews=new i,this._abortController=new AbortController,this._loadingComponents=0,this._pendingWhenSublayerViews=new Map,this.ignoresMemoryFactor=!1}get filterExpression(){const e=this.layer.activeFilterId,r=null!=e?this.layer.filters.find((r=>r.id===e)):null,s=null!=r?r.filterBlocks?.find((e=>\"solid\"===e.filterMode.type)):null;return s?s.filterExpression:null}get filterExpressions(){const e=this.layer.activeFilterId,r=null!=e?this.layer.filters.find((r=>r.id===e)):null;return r?.filterBlocks?r.filterBlocks.toArray().map((e=>[e.filterExpression??\"\",w(e)])):[]}get updatingProgressValue(){const e=this.sublayerViews,r=this._loadingComponents+(e?e.length:0);return e.reduce(((e,r)=>e+r.updatingProgress),0)/r}isUpdating(){return this._loadingComponents>0||this.sublayerViews&&this.sublayerViews.some((e=>e.updating))}initialize(){V(this.layer.spatialReference,this.view.spatialReference,this.view.viewingMode),this._initializeSubLayerViews(this.layer.sublayers,this)}destroy(){this.sublayerViews&&(this.sublayerViews.forEach((e=>e.destroy())),this.sublayerViews=null),this._abortController=l(this._abortController)}_initializeSubLayerViews(e,r){const s=this,t=this.view;e.forEach((e=>{if(!e.isEmpty)if(\"building-group\"===e.type){const s=new C({sublayer:e,view:t,parent:r});this._initializeSubLayerViews(e.sublayers,s)}else\"mesh\"===e.geometryType&&(this._loadingComponents++,e.load({signal:this._abortController.signal}).then((()=>{const i=new f({sublayer:e,layerView:s,view:t,parent:r});this.sublayerViews.push(i);const o=this._pendingWhenSublayerViews.get(e);if(o){for(const e of o)e.resolve(i);this._pendingWhenSublayerViews.delete(e)}this.addHandles([c((()=>i.updating),(()=>this.notifyChange(\"updating\")),y),c((()=>i.updatingProgress),(()=>this.notifyChange(\"updatingProgressValue\")),y)])})).catch((r=>{a(r)||n.getLogger(this).error(`Error while creating view for sublayer ${e.id}\\nLayer: ${this.layer.url}\\n`,r)})).then((()=>{this._loadingComponents--,this.notifyChange(\"updating\"),this.notifyChange(\"updatingProgressValue\")})))}))}getGraphicFromIntersectorTarget(e){for(const r of this.sublayerViews.items)if(r.sublayer.uid===e.sublayerUid)return r.getGraphicFromIntersectorTarget(e);return null}async fetchPopupFeaturesFromGraphics(e,r){if(0===e.length)return[];const s=t(e,(e=>e.sourceLayer)),i=[];for(const[t,n]of s){const e=this._findComponent(t);null!=e&&i.push(e.fetchPopupFeaturesFromGraphics(n,r))}const o=await u(i);return p(r),o.flat()}whenGraphicBounds(e){const r=this._findComponent(e.sourceLayer);return null==r?Promise.reject():r.whenGraphicBounds(e)}getAABBFromIntersectorTarget(e){for(const r of this.sublayerViews.items)if(r.sublayer.uid===e.sublayerUid)return r.getAABBFromIntersectorTarget(e);return null}async whenSublayerView(e){const r=this._findComponent(e);if(null!=r)return r;const s=this._pendingWhenSublayerViews.get(e),t=h();return s?s.push(t):this._pendingWhenSublayerViews.set(e,[t]),t.promise}_findComponent(e){return this.sublayerViews.find((r=>e===r.sublayer))}highlight(e){e instanceof r?e=[e]:e instanceof i&&(e=e.toArray());const s=[];if(Array.isArray(e)&&e.length>0&&e[0]instanceof r){const r=e,t=new Map;for(const e of r){let r=t.get(e.sourceLayer);null==r&&(r=[],t.set(e.sourceLayer,r)),r.push(e)}this.sublayerViews.forEach((e=>{const r=t.get(e.sublayer);r&&s.push(e.highlight(r))}))}return o(s)}get usedMemory(){return this.sublayerViews.reduce(((e,r)=>e+r.usedMemory),0)}get unloadedMemory(){return this.sublayerViews.reduce(((e,r)=>e+r.unloadedMemory),0)}};e([d()],S.prototype,\"sublayerViews\",void 0),e([d({readOnly:!0})],S.prototype,\"filterExpression\",null),e([d({readOnly:!0})],S.prototype,\"filterExpressions\",null),e([d(j)],S.prototype,\"updatingProgress\",void 0),e([d({readOnly:!0,dependsOn:[]})],S.prototype,\"updatingProgressValue\",null),S=e([g(\"esri.views.3d.layers.BuildingSceneLayerView3D\")],S);const B=S;export{B as default};\n"],"names":["p","l","n","s","r","t","EventedMixin","constructor","e","super","this","sublayer","parent","view","initialize","suspended","canResume","updating","isUpdating","visible","_overrideIfSome","fullOpacity","opacity","ready","i","prototype","readOnly","type","Boolean","o","a","Solid","WireFrame","XRay","filterMode","mode","edgeMaterial","edges","c","color","pickable","colorMixMode","Replace","castShadows","d","lastMaterial","cachedMaterial","arguments","availableFields","filter","Error","queryFeatures","queryObjectIds","queryFeatureCount","createQuery","queryExtent","highlight","C","q","Q","F","g","L","layerView","_elevationContext","_isIntegratedMesh","_supportsLabeling","requiredFields","progressiveLoadFactor","_queryEngine","i3slayer","layerUid","layer","uid","sublayerUid","layerId","id","sublayerId","layerPopupEnabledAndHasTemplate","popupEnabled","R","popup","defaultPopupTemplateEnabled","_updatingHandles","add","mergedFilter","w","checkSupport","_i3sFilter","viewFilter","layerFieldsIndex","fieldsIndex","loadAsyncModule","_loadAsyncModule","addSqlFilter","logError","addTimeFilter","renderer","definitionExpressionFields","filterExpressionFields","timeFilterFields","_updateRequiredFields","_rendererChange","_filterChange","parsedDefinitionExpression","sortedObjectIds","parsedWhereClause","getTimeFilterDependencies","parsedGeometry","spatialRelationship","_geometryFilterChange","parsedFilterExpressions","_updateSymbologyOverride","addResolvingPromise","lodFactor","qualitySettings","sceneService","object","modelName","filterExpressions","map","_ref","create","getLogger","error","isStandardized","fieldNames","v","fields","missingFields","length","join","_get","_set","_setSymbologyOverride","testFeature","_","y","reduce","_ref2","concat","Array","timeExtent","timeInfo","startField","endField","outFields","_createLayerGraphic","sourceLayer","_controller","rootNodeVisible","fetchPopupFeaturesFromGraphics","_validateFetchPopupFeatures","associatedLayer","load","u","V","U","Set","f","push","catch","warn","whenGraphicAttributes","from","then","getRequiredFields","getFilters","addFilters","crsIndex","_collection","returnGeometry","outSpatialReference","spatialReference","m","_ensureQueryEngine","executeQueryForExtent","_ensureQuery","signal","executeQueryForCount","executeQuery","features","executeQueryForIds","_createQueryEngine","E","renderSpatialReference","x","priority","A","FEATURE_QUERY_ENGINE","spatialIndex","j","featureAdapter","S","objectIdField","attributeStorageInfo","getFeatureExtent","forAllFeatures","_forAllFeatures","index","meta","b","QUERYABLE","sourceSpatialReference","I","viewSpatialReference","_addDefinitionExpressionToQuery","h","String","O","sublayerViews","_abortController","AbortController","_loadingComponents","_pendingWhenSublayerViews","Map","ignoresMemoryFactor","filterExpression","activeFilterId","filters","find","filterBlocks","toArray","updatingProgressValue","updatingProgress","some","viewingMode","_initializeSubLayerViews","sublayers","destroy","forEach","isEmpty","geometryType","get","resolve","delete","addHandles","notifyChange","url","getGraphicFromIntersectorTarget","items","_findComponent","flat","whenGraphicBounds","Promise","reject","getAABBFromIntersectorTarget","whenSublayerView","set","promise","isArray","usedMemory","unloadedMemory","dependsOn","B"],"sourceRoot":""}