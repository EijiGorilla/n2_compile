{"version":3,"file":"static/js/27358.89f520e7.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/layers/graphics/data/QueryEngineCapabilities.js","../node_modules/@arcgis/core/layers/graphics/editingSupport.js","../node_modules/@arcgis/core/layers/graphics/applyEditsUtils.js","../node_modules/@arcgis/core/layers/graphics/sources/FeatureLayerSource.js","../node_modules/@arcgis/core/layers/graphics/sources/support/clientSideDefaults.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nconst t={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByAnonymous:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};export{t as queryCapabilities};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport e from\"../../Graphic.js\";import t from\"../../core/Collection.js\";import a from\"../../core/Error.js\";import{clone as r}from\"../../core/lang.js\";import s from\"../../core/Logger.js\";import{createResolver as i}from\"../../core/promiseUtils.js\";import{dataComponents as n}from\"../../core/urlUtils.js\";import{generateBracedUUID as o}from\"../../core/uuid.js\";import{normalizeCentralMeridian as l}from\"../../geometry/support/normalizeUtils.js\";import{isGeographic as d,equals as u,isWGS84 as p,isWebMercator as c}from\"../../geometry/support/spatialReferenceUtils.js\";import{isEditBusLayer as h,emitApplyEditsEvent as m}from\"../mixins/EditBusLayer.js\";import{isValidFieldValue as f}from\"../support/fieldUtils.js\";import{getMimeTypeFormatId as y,getFilenameFormatId as g}from\"../support/infoFor3D.js\";import{getEffectiveEditingEnabled as b,getEffectiveLayerCapabilities as w}from\"../support/layerUtils.js\";function F(e){return null!=e?.applyEdits}function A(e){return\"object\"==typeof e&&null!=e&&\"objectId\"in e&&!!e.objectId}function v(e){return e.every(A)}function I(e){return\"object\"==typeof e&&null!=e&&\"globalId\"in e&&!!e.globalId}function $(e){return e.every(I)}async function E(e,t,a,s={}){let n;const o=\"gdbVersion\"in e?e.gdbVersion:null,l=s.gdbVersion??o;if(h(e)&&e.url)n=m(e.url,e.layerId,l,\"original-and-current-features\"===s.returnServiceEditsOption);else{n=i(),n.promise.then((t=>{(t.addedFeatures.length||t.updatedFeatures.length||t.deletedFeatures.length||t.addedAttachments.length||t.updatedAttachments.length||t.deletedAttachments.length)&&e.emit(\"edits\",t)}));const t={result:n.promise};e.emit(\"apply-edits\",t)}try{const{results:i,edits:o}=await S(e,t,a,s),l=e=>e.filter((e=>!e.error)).map(r),d={edits:o,addedFeatures:l(i.addFeatureResults),updatedFeatures:l(i.updateFeatureResults),deletedFeatures:l(i.deleteFeatureResults),addedAttachments:l(i.addAttachmentResults),updatedAttachments:l(i.updateAttachmentResults),deletedAttachments:l(i.deleteAttachmentResults),exceededTransferLimit:!1,historicMoment:i.editMoment?new Date(i.editMoment):null,globalIdToObjectId:s.globalIdToObjectId};return i.editedFeatureResults?.length&&(d.editedFeatures=i.editedFeatureResults),n.resolve(d),i}catch(d){throw n.reject(d),d}}async function S(e,t,r,s){if(await e.load(),!F(t))throw new a(`${e.type}-layer:no-editing-support`,\"Layer source does not support applyEdits capability\",{layer:e});if(!b(e))throw new a(`${e.type}-layer:editing-disabled`,\"Editing is disabled for layer\",{layer:e});const{edits:i,options:n}=await R(e,r,s);return i.addFeatures?.length||i.updateFeatures?.length||i.deleteFeatures?.length||i.addAttachments?.length||i.updateAttachments?.length||i.deleteAttachments?.length?{edits:i,results:await t.applyEdits(i,n)}:{edits:i,results:{addFeatureResults:[],updateFeatureResults:[],deleteFeatureResults:[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}}async function R(e,t,r){const i=w(e),n=t&&(t.addFeatures||t.updateFeatures||t.deleteFeatures),o=t&&(t.addAttachments||t.updateAttachments||t.deleteAttachments),l=null!=e.infoFor3D;if(M(t,i,r,!!n,!!o,`${e.type}-layer`),!i.data.isVersioned&&r?.gdbVersion)throw new a(`${e.type}-layer:invalid-parameter`,\"'gdbVersion' is applicable only if the layer supports versioned data. See: 'capabilities.data.isVersioned'\");if(!i.editing.supportsRollbackOnFailure&&r?.rollbackOnFailureEnabled)throw new a(`${e.type}-layer:invalid-parameter`,\"This layer does not support 'rollbackOnFailureEnabled' parameter. See: 'capabilities.editing.supportsRollbackOnFailure'\");const d={...r};if(null!=d.rollbackOnFailureEnabled||i.editing.supportsRollbackOnFailure||(d.rollbackOnFailureEnabled=!0),d.rollbackOnFailureEnabled||\"original-and-current-features\"!==d.returnServiceEditsOption||(!1===d.rollbackOnFailureEnabled&&s.getLogger(\"esri.layers.graphics.editingSupport\").warn(`${e.type}-layer:invalid-parameter`,\"'original-and-current-features' is valid for 'returnServiceEditsOption' only when 'rollBackOnFailure' is true, but 'rollBackOnFailure' was set to false. 'rollBackOnFailure' has been overwritten and set to true.\"),d.rollbackOnFailureEnabled=!0),!i.editing.supportsReturnServiceEditsInSourceSpatialReference&&d.returnServiceEditsInSourceSR)throw new a(`${e.type}-layer:invalid-parameter`,\"This layer does not support 'returnServiceEditsInSourceSR' parameter. See: 'capabilities.editing.supportsReturnServiceEditsInSourceSpatialReference'\");if(d.returnServiceEditsInSourceSR&&\"original-and-current-features\"!==d.returnServiceEditsOption)throw new a(`${e.type}-layer:invalid-parameter`,\"'returnServiceEditsInSourceSR' is valid only when 'returnServiceEditsOption' is set to 'original-and-current-features'\");const u=V(t,i,`${e.type}-layer`),p=r?.globalIdUsed||l,c=e.fields.filter((e=>\"big-integer\"===e.type||\"oid\"===e.type&&(e.length||0)>=8));if(p){const{globalIdField:t}=e;if(null==t)throw new a(`${e.type}-layer:invalid-parameter`,\"Layer does not specify a global id field.\");u.addFeatures.forEach((e=>T(e,t)))}u.addFeatures.forEach((t=>U(t,e,p,c))),u.updateFeatures.forEach((t=>L(t,e,p,c))),u.deleteFeatures.forEach((t=>k(t,e,p,c))),u.addAttachments.forEach((t=>B(t,e))),u.updateAttachments.forEach((t=>B(t,e))),l&&await z(u,e);return{edits:await D(u),options:d}}function j(e,t,r,s){if(r){if(\"attributes\"in e&&!e.attributes[t.globalIdField])throw new a(`${t.type}-layer:invalid-parameter`,`Feature should have '${t.globalIdField}' when 'globalIdUsed' is true`);if(!(\"attributes\"in e)&&!e.globalId)throw new a(`${t.type}-layer:invalid-parameter`,\"`'globalId' of the feature should be passed when 'globalIdUsed' is true\")}if(s.length&&\"attributes\"in e)for(const i of s){const r=e.attributes[i.name];if(void 0!==r&&!f(i,r))throw new a(`${t.type}-layer:invalid-parameter`,`Big-integer field '${i.name}' of the feature must be less than ${Number.MAX_SAFE_INTEGER}`,{feature:e})}if(\"geometry\"in e&&null!=e.geometry){if(e.geometry.hasZ&&!1===t.capabilities?.data.supportsZ)throw new a(`${t.type}-layer:z-unsupported`,\"Layer does not support z values while feature has z values.\");if(e.geometry.hasM&&!1===t.capabilities?.data.supportsM)throw new a(`${t.type}-layer:m-unsupported`,\"Layer does not support m values while feature has m values.\")}}function O(e,t){if(\"geometry\"in e&&\"mesh\"===e.geometry?.type&&null!=t.infoFor3D&&null!=t.spatialReference){const{geometry:r}=e,{spatialReference:s,vertexSpace:i}=r,n=t.spatialReference,o=\"local\"===i.type,l=d(n),h=u(n,s),m=h||p(n)&&(p(s)||c(s));if(!(o&&l&&m||!o&&!l&&h))throw new a(`${t.type}-layer:mesh-unsupported`,`Uploading a mesh with a ${i.type} vertex space and a spatial reference wkid:${s.wkid} to a layer with a spatial reference wkid:${n.wkid} is not supported.`)}}function U(e,t,a,r){j(e,t,a,r),O(e,t)}function k(e,t,a,r){j(e,t,a,r)}function L(e,t,r,s){j(e,t,r,s),O(e,t);const i=w(t);if(\"geometry\"in e&&null!=e.geometry&&!i?.editing.supportsGeometryUpdate)throw new a(`${t.type}-layer:unsupported-operation`,\"Layer does not support geometry updates.\")}function B(e,t){const{feature:r,attachment:s}=e;if(!r||\"attributes\"in r&&!r.attributes[t.globalIdField])throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment should have reference to a feature with 'globalId'\");if(!(\"attributes\"in r)&&!r.globalId)throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment should have reference to 'globalId' of the parent feature\");if(!s.globalId)throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment should have 'globalId'\");if(!s.data&&!s.uploadId)throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment should have 'data' or 'uploadId'\");if(!(s.data instanceof File&&!!s.data.name)&&!s.name)throw new a(`${t.type}-layer:invalid-parameter`,\"'name' is required when attachment is specified as Base64 encoded string using 'data'\");if(!t.capabilities?.editing.supportsUploadWithItemId&&s.uploadId)throw new a(`${t.type}-layer:invalid-parameter`,\"This layer does not support 'uploadId' parameter. See: 'capabilities.editing.supportsUploadWithItemId'\");if(\"string\"==typeof s.data){const e=n(s.data);if(e&&!e.isBase64)throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment 'data' should be a Blob, File or Base64 encoded string\")}}function T(e,t){const{attributes:a}=e;null==a[t]&&(a[t]=o())}async function D(e){const t=e.addFeatures??[],a=e.updateFeatures??[],r=t.concat(a).map((e=>e.geometry)),s=await l(r),i=t.length,n=a.length;return s.slice(0,i).forEach(((e,a)=>t[a].geometry=e)),s.slice(i,i+n).forEach(((e,t)=>a[t].geometry=e)),e}function G(e){return{addFeatures:Array.from(e?.addFeatures??[]),updateFeatures:Array.from(e?.updateFeatures??[]),deleteFeatures:e&&t.isCollection(e.deleteFeatures)?e.deleteFeatures.toArray():e.deleteFeatures||[],addAttachments:e.addAttachments||[],updateAttachments:e.updateAttachments||[],deleteAttachments:e.deleteAttachments||[]}}function V(e,t,r){const s=G(e);if(s.addFeatures?.length&&!t.operations.supportsAdd)throw new a(`${r}:unsupported-operation`,\"Layer does not support adding features.\");if(s.updateFeatures?.length&&!t.operations.supportsUpdate)throw new a(`${r}:unsupported-operation`,\"Layer does not support updating features.\");if(s.deleteFeatures?.length&&!t.operations.supportsDelete)throw new a(`${r}:unsupported-operation`,\"Layer does not support deleting features.\");return s.addFeatures=s.addFeatures.map(x),s.updateFeatures=s.updateFeatures.map(x),s.addAssetFeatures=[],s}function M(e,t,r,s,i,n){if(!e||!s&&!i)throw new a(`${n}:missing-parameters`,\"'addFeatures', 'updateFeatures', 'deleteFeatures', 'addAttachments', 'updateAttachments' or 'deleteAttachments' parameter is required\");if(!t.editing.supportsGlobalId&&r?.globalIdUsed)throw new a(`${n}:invalid-parameter`,\"This layer does not support 'globalIdUsed' parameter. See: 'capabilities.editing.supportsGlobalId'\");if(!t.editing.supportsGlobalId&&i)throw new a(`${n}:invalid-parameter`,\"'addAttachments', 'updateAttachments' and 'deleteAttachments' are applicable only if the layer supports global ids. See: 'capabilities.editing.supportsGlobalId'\");if(!r?.globalIdUsed&&i)throw new a(`${n}:invalid-parameter`,\"When 'addAttachments', 'updateAttachments' or 'deleteAttachments' is specified, globalIdUsed should be set to true\")}function x(t){const a=new e;return t.attributes||(t.attributes={}),a.geometry=t.geometry,a.attributes=t.attributes,a}async function z(e,t){if(null==t.infoFor3D)return;const{infoFor3D:r}=t,s=y(\"model/gltf-binary\",r.supportedFormats)??g(\"glb\",r.supportedFormats);if(!(!!s&&r.editFormats.includes(s)))throw new a(`${t.type}-layer:binary-gltf-asset-not-supported`,\"3DObjectFeatureLayer requires binary glTF (.glb) support for updating mesh geometry.\");e.addAssetFeatures??=[];const{addAssetFeatures:i}=e;for(const a of e.addFeatures??[])q(a)&&i.push(a);for(const a of e.updateFeatures??[])q(a)&&i.push(a)}function q(e){return\"mesh\"===e?.geometry?.type}function W(e,t,r,s){if(!F(t))throw new a(`${e.type}-layer:no-editing-support`,\"Layer source does not support applyEdits capability\",{layer:e});if(!t.uploadAssets)throw new a(`${e.type}-layer:no-asset-upload-support`,\"Layer source does not support uploadAssets capability\",{layer:e});return t.uploadAssets(r,s)}export{E as applyEdits,M as checkEditingCapabilities,$ as isFeatureIdentifierArrayWithGlobalId,v as isFeatureIdentifierArrayWithObjectId,I as isFeatureIdentifierWithGlobalId,A as isFeatureIdentifierWithObjectId,G as normalizeCollections,V as normalizeEdits,D as normalizeGeometries,x as shallowCloneFeature,W as uploadAssets};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport t from\"../../Graphic.js\";import e from\"../../core/Error.js\";import a from\"../../core/Logger.js\";import{getMetersPerCartesianUnitForSR as r}from\"../../core/unitUtils.js\";import{parseData as s}from\"../../core/urlUtils.js\";import{projectWithoutEngine as o}from\"../../geometry/projection.js\";import{fromJSON as n}from\"../../geometry/support/jsonUtils.js\";import{equals as l,isWGS84 as i,isWebMercator as u}from\"../../geometry/support/spatialReferenceUtils.js\";import{isFeatureIdentifierArrayWithGlobalId as d,isFeatureIdentifierArrayWithObjectId as c}from\"./editingSupport.js\";async function p(t,e,a){const{geometry:s}=e,n={...e.attributes};if(null!=a&&\"mesh\"===s?.type){const{transformFieldRoles:e}=a,{origin:d,spatialReference:c,transform:p,vertexSpace:m}=s,f=\"local\"===m.type,g=t.spatialReference,b=g.isGeographic,R=l(g,c),y=R||i(g)&&(i(c)||u(c));if(!(f&&b&&y||!f&&!b&&R))return null;const I=o(d,c,g);if(null==I)return null;if(n[e.originX]=I.x,n[e.originY]=I.y,n[e.originZ]=I.z??0,null!=p){const{translation:t,scale:a,rotation:s}=p,o=f?1:r(c)/r(g);n[e.translationX]=t[0]*o,n[e.translationY]=t[2]*o,n[e.translationZ]=-t[1]*o,n[e.scaleX]=a[0],n[e.scaleY]=a[2],n[e.scaleZ]=a[1],n[e.rotationX]=s[0],n[e.rotationY]=s[2],n[e.rotationZ]=-s[1],n[e.rotationDeg]=s[3]}return{attributes:n}}return null==s?{attributes:n}:\"mesh\"===s.type||\"extent\"===s.type?null:{geometry:s.toJSON(),attributes:n}}async function m(t,e){const a=await Promise.all((e.addAttachments??[]).map((e=>f(t,e)))),r=await Promise.all((e.updateAttachments??[]).map((e=>f(t,e)))),s=e.deleteAttachments??[];return a.length||r.length||s.length?{adds:a,updates:r,deletes:[...s]}:null}async function f(t,e){const{feature:a,attachment:r}=e,{globalId:o,name:n,contentType:l,data:i,uploadId:u}=r,d={globalId:o};if(a&&(\"attributes\"in a?d.parentGlobalId=a.attributes?.[t.globalIdField]:a.globalId&&(d.parentGlobalId=a.globalId)),u)d.uploadId=u;else if(i){const t=await s(i);t&&(d.contentType=t.mediaType,d.data=t.data),i instanceof File&&(d.name=i.name)}return n&&(d.name=n),l&&(d.contentType=l),d}function g(t,e,a){if(!e||0===e.length)return[];if(a&&d(e))return e.map((t=>t.globalId));if(c(e))return e.map((t=>t.objectId));const r=a?t.globalIdField:t.objectIdField;return r?e.map((t=>t.getAttribute(r))):[]}function b(t){const e=t?.assetMaps;if(e){for(const t of e.addResults)t.success||a.getLogger(\"esri.layers.graphics.sources.support.sourceUtils\").error(`Failed to map asset to feature with globalId ${t.globalId}.`);for(const t of e.updateResults)t.success||a.getLogger(\"esri.layers.graphics.sources.support.sourceUtils\").error(`Failed to map asset to feature with globalId ${t.globalId}.`)}const r=t?.attachments,s={addFeatureResults:t?.addResults?.map(R)??[],updateFeatureResults:t?.updateResults?.map(R)??[],deleteFeatureResults:t?.deleteResults?.map(R)??[],addAttachmentResults:r?.addResults?r.addResults.map(R):[],updateAttachmentResults:r?.updateResults?r.updateResults.map(R):[],deleteAttachmentResults:r?.deleteResults?r.deleteResults.map(R):[]};return t?.editMoment&&(s.editMoment=t.editMoment),s}function R(t){const a=!0===t.success?null:t.error||{code:void 0,description:void 0};return{objectId:t.objectId,globalId:t.globalId,error:a?new e(\"feature-layer-source:edit-failure\",a.description,{code:a.code}):null}}function y(e,a){return new t({attributes:e.attributes,geometry:n({...e.geometry,spatialReference:a})})}function I(t,e){return{adds:t?.adds?.map((t=>y(t,e)))||[],updates:t?.updates?.map((t=>({original:y(t[0],e),current:y(t[1],e)})))||[],deletes:t?.deletes?.map((t=>y(t,e)))||[],spatialReference:e}}function h(t){const e=t.details.raw,a=+e.code,r=+e.extendedCode;return 500===a&&(-2147217144===r||-2147467261===r)}export{I as createEditedFeatures,R as createFeatureEditResult,m as getAttachmentEditsJSON,g as getFeatureIds,p as getFeatureJSON,h as isProtectedOrPrivateVersionError,b as unpackEditResultData};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../geometry.js\";import{id as t}from\"../../../kernel.js\";import s from\"../../../request.js\";import r from\"../../../TimeExtent.js\";import{isSome as a}from\"../../../core/arrayUtils.js\";import i from\"../../../core/Error.js\";import has from\"../../../core/has.js\";import{JSONMap as o}from\"../../../core/jsonMap.js\";import n from\"../../../core/Loadable.js\";import u from\"../../../core/Logger.js\";import{setDeepValue as l}from\"../../../core/object.js\";import{debounce as c,after as d,throwIfAbortError as p}from\"../../../core/promiseUtils.js\";import{join as y}from\"../../../core/urlUtils.js\";import{generateBracedUUID as h}from\"../../../core/uuid.js\";import{property as m}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as f}from\"../../../core/accessorSupport/decorators/subclass.js\";import g from\"../../../geometry/Extent.js\";import{isRelativeVertexSpace as w,toRelativeVertexSpace as S}from\"../../../geometry/support/meshVertexSpaceUtils.js\";import{isOriginalExternal as q}from\"../../../geometry/support/meshUtils/External.js\";import{createFeatureEditResult as E,getFeatureJSON as O,getFeatureIds as R,getAttachmentEditsJSON as b,isProtectedOrPrivateVersionError as A,unpackEditResultData as F,createEditedFeatures as _}from\"../applyEditsUtils.js\";import{createDrawingInfo as x}from\"./support/clientSideDefaults.js\";import j from\"./support/QueryTask.js\";import{isHostedAgolService as I}from\"../../support/arcgisLayerUrl.js\";import{ensureLayerCredential as v}from\"../../support/featureLayerUtils.js\";import{getAssetMapTable as T}from\"../../support/infoFor3D.js\";import{executeQueryJSON as N}from\"../../../rest/query/executeQueryJSON.js\";import{unapplyEditsZUnitScaling as M}from\"../../../rest/query/operations/editsZScale.js\";import U from\"../../../rest/support/Query.js\";import{isSafeToEditVersion as J,isVersionInEditSession as k,isHistoricVersion as L,currentSessionId as Q}from\"../../../versionManagement/support/versionManagementUtils.js\";import C from\"../../../geometry/SpatialReference.js\";const D=new o({originalAndCurrentFeatures:\"original-and-current-features\",none:\"none\"}),P=new Set([\"Feature Layer\",\"Oriented Imagery Layer\",\"Table\",\"Catalog Layer\"]),$=new o({Started:\"published\",Publishing:\"publishing\",Stopped:\"unavailable\"});let V=class extends n{constructor(){super(...arguments),this.type=\"feature-layer\",this.refresh=c((async()=>{await this.load();const e=this.sourceJSON.editingInfo?.lastEditDate;if(null==e)return{dataChanged:!0,updates:{}};try{await this._fetchService(null)}catch{return{dataChanged:!0,updates:{}}}const t=e!==this.sourceJSON.editingInfo?.lastEditDate;return{dataChanged:t,updates:t?{editingInfo:this.sourceJSON.editingInfo,extent:this.sourceJSON.extent}:null}})),this._ongoingAssetUploads=new Map}load(e){const t=this.layer.sourceJSON,s=this._fetchService(t,{...e}).then((()=>this.layer.setUserPrivileges(this.sourceJSON.serviceItemId,e))).then((()=>this._ensureLatestMetadata(e)));return this.addResolvingPromise(s),Promise.resolve(this)}get queryTask(){const{capabilities:e,parsedUrl:t,dynamicDataSource:s,infoFor3D:r,gdbVersion:a,spatialReference:i,fieldsIndex:o}=this.layer,n=has(\"featurelayer-pbf\")&&e?.query.supportsFormatPBF&&null==r,u=e?.operations?.supportsQueryAttachments??!1;return new j({url:t.path,pbfSupported:n,fieldsIndex:o,infoFor3D:r,dynamicDataSource:s,gdbVersion:a,sourceSpatialReference:i,queryAttachmentsSupported:u})}async addAttachment(e,t){await this.load();const{layer:r}=this;await v(r,\"editing\");const a=e.attributes[r.objectIdField],i=r.parsedUrl.path+\"/\"+a+\"/addAttachment\",o=this._getLayerRequestOptions(),n=this._getFormDataForAttachment(t,o.query);try{const e=await s(i,{body:n});return E(e.data.addAttachmentResult)}catch(u){throw this._createAttachmentErrorResult(a,u)}}async updateAttachment(e,t,r){await this.load();const{layer:a}=this;await v(a,\"editing\");const i=e.attributes[a.objectIdField],o=a.parsedUrl.path+\"/\"+i+\"/updateAttachment\",n=this._getLayerRequestOptions({query:{attachmentId:t}}),u=this._getFormDataForAttachment(r,n.query);try{const e=await s(o,{body:u});return E(e.data.updateAttachmentResult)}catch(l){throw this._createAttachmentErrorResult(i,l)}}async applyEdits(e,r){await this.load();const{layer:o}=this;await v(o,\"editing\");const n=o.infoFor3D,u=null!=n,l=u||(r?.globalIdUsed??!1),c=u?await this._uploadMeshesAndGetAssetMapEditsJSON(e):null,d=e.addFeatures?.map((e=>O(this.layer,e,n)))??[],p=(await Promise.all(d)).filter(a),y=e.updateFeatures?.map((e=>O(this.layer,e,n)))??[],h=(await Promise.all(y)).filter(a),m=R(this.layer,e.deleteFeatures,l);M(p,h,o.spatialReference);const f=await b(this.layer,e),g=o.capabilities.editing.supportsAsyncApplyEdits&&u,w=r?.gdbVersion||o.gdbVersion,S={gdbVersion:w,rollbackOnFailure:r?.rollbackOnFailureEnabled,useGlobalIds:l,returnEditMoment:r?.returnEditMoment,usePreviousEditMoment:r?.usePreviousEditMoment,async:g};await J(this.layer.url,w,!0);const q=k(this.layer.url,w||null);if(await L(o.url,w,o.historicMoment))throw new i(\"feature-layer-source:historic-version\",\"Editing a historic version is not allowed\");r?.returnServiceEditsOption?(S.edits=JSON.stringify([{id:o.layerId,adds:p,updates:h,deletes:m,attachments:f,assetMaps:c}]),S.returnServiceEditsOption=D.toJSON(r?.returnServiceEditsOption),S.returnServiceEditsInSourceSR=r?.returnServiceEditsInSourceSR):(S.adds=p.length?JSON.stringify(p):null,S.updates=h.length?JSON.stringify(h):null,S.deletes=m.length?l?JSON.stringify(m):m.join(\",\"):null,S.attachments=f&&JSON.stringify(f),S.assetMaps=null!=c?JSON.stringify(c):void 0);const E=this._getLayerRequestOptions({method:\"post\",query:S});q&&(E.authMode=\"immediate\",E.query.returnEditMoment=!0,E.query.sessionId=Q);const F=r?.returnServiceEditsOption?o.url:o.parsedUrl.path;let _;try{_=g?await this._asyncApplyEdits(F+\"/applyEdits\",E):await s(F+\"/applyEdits\",E)}catch(x){if(!A(x))throw x;E.authMode=\"immediate\",_=g?await this._asyncApplyEdits(F+\"/applyEdits\",E):await s(F+\"/applyEdits\",E)}if(!o.capabilities.operations?.supportsEditing&&o.effectiveCapabilities?.operations?.supportsEditing){const e=t?.findCredential(o.url);await(e?.refreshToken())}return this._createEditsResult(_)}async deleteAttachments(e,t){await this.load();const{layer:r}=this;await v(r,\"editing\");const a=e.attributes[r.objectIdField],i=r.parsedUrl.path+\"/\"+a+\"/deleteAttachments\";try{return(await s(i,this._getLayerRequestOptions({query:{attachmentIds:t.join(\",\")},method:\"post\"}))).data.deleteAttachmentResults.map(E)}catch(o){throw this._createAttachmentErrorResult(a,o)}}fetchRecomputedExtents(e={}){const t=e.signal;return this.load({signal:t}).then((async()=>{const t=this._getLayerRequestOptions({...e,query:{returnUpdates:!0}}),{layerId:a,url:i}=this.layer,{data:o}=await s(`${i}/${a}`,t),{id:n,extent:u,fullExtent:l,timeExtent:c}=o,d=u||l;return{id:n,fullExtent:d&&g.fromJSON(d),timeExtent:c&&r.fromJSON({start:c[0],end:c[1]})}}))}async queryAttachments(e,t={}){await this.load();const s=this._getLayerRequestOptions(t);return this.queryTask.executeAttachmentQuery(e,s)}async queryFeatures(e,t){await this.load();const s=await this.queryTask.execute(e,{...t,query:this._createRequestQueryOptions(t)});return e.outStatistics?.length&&s.features.length&&s.features.forEach((t=>{const s=t.attributes;e.outStatistics?.forEach((({outStatisticFieldName:e})=>{if(e){const t=e.toLowerCase();t&&t in s&&e!==t&&(s[e]=s[t],delete s[t])}}))})),s}async queryFeaturesJSON(e,t){return await this.load(),this.queryTask.executeJSON(e,{...t,query:this._createRequestQueryOptions(t)})}async queryObjectIds(e,t){return await this.load(),this.queryTask.executeForIds(e,{...t,query:this._createRequestQueryOptions(t)})}async queryFeatureCount(e,t){return await this.load(),this.queryTask.executeForCount(e,{...t,query:this._createRequestQueryOptions(t)})}async queryExtent(e,t){return await this.load(),this.queryTask.executeForExtent(e,{...t,query:this._createRequestQueryOptions(t)})}async queryRelatedFeatures(e,t){return await this.load(),this.queryTask.executeRelationshipQuery(e,{...t,query:this._createRequestQueryOptions(t)})}async queryRelatedFeaturesCount(e,t){return await this.load(),this.queryTask.executeRelationshipQueryForCount(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopFeatures(e,t){return await this.load(),this.queryTask.executeTopFeaturesQuery(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopObjectIds(e,t){return await this.load(),this.queryTask.executeForTopIds(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopExtents(e,t){return await this.load(),this.queryTask.executeForTopExtents(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopCount(e,t){return await this.load(),this.queryTask.executeForTopCount(e,{...t,query:this._createRequestQueryOptions(t)})}async fetchPublishingStatus(){if(!I(this.layer.url))return\"unavailable\";const e=y(this.layer.url,\"status\"),t=await s(e,{query:{f:\"json\"}});return $.fromJSON(t.data.status)}async uploadAssets(e,t){const{uploadAssets:s}=await import(\"./support/uploadAssets.js\");return s(e,{layer:this.layer,ongoingUploads:this._ongoingAssetUploads},t)}async _asyncApplyEdits(e,t){const r=(await s(e,t)).data.statusUrl;for(;;){const e=(await s(r,{query:{f:\"json\"},responseType:\"json\"})).data;switch(e.status){case\"Completed\":return s(e.resultUrl,{query:{f:\"json\"},responseType:\"json\"});case\"CompletedWithErrors\":throw new i(\"async-applyEdits-failed\",\"asynchronous applyEdits call failed.\");case\"Failed ImportChanges\":case\"InProgress\":case\"Pending\":case\"ExportAttachments\":case\"ExportChanges\":case\"ExportingData\":case\"ExportingSnapshot\":case\"ImportAttachments\":case\"ProvisioningReplica\":case\"UnRegisteringReplica\":break;default:throw new i(\"async-applyEdits-failed\",\"asynchronous applyEdits call failed (undefined response status)\")}await d(G)}}_createRequestQueryOptions(e){const t={...this.layer.customParameters,token:this.layer.apiKey,...e?.query};return this.layer.datesInUnknownTimezone&&(t.timeReferenceUnknownClient=!0),t}async _fetchService(e,t){if(!e){const r={};has(\"featurelayer-advanced-symbols\")&&(r.returnAdvancedSymbols=!0),t?.cacheBust&&(r._ts=Date.now());const{data:a}=await s(this.layer.parsedUrl.path,this._getLayerRequestOptions({query:r,signal:t?.signal}));e=a}this.sourceJSON=await this._patchServiceJSON(e,t?.signal);const r=e.type;if(!P.has(r))throw new i(\"feature-layer-source:unsupported-type\",`Source type \"${r}\" is not supported`)}async _patchServiceJSON(e,t){if(\"Table\"!==e.type&&e.geometryType&&!e?.drawingInfo?.renderer&&!e.defaultSymbol){const t=x(e.geometryType).renderer;l(\"drawingInfo.renderer\",t,e)}if(\"esriGeometryMultiPatch\"===e.geometryType&&e.infoFor3D&&(e.geometryType=\"mesh\"),null==e.extent)try{const{data:r}=await s(this.layer.url,this._getLayerRequestOptions({signal:t}));r.spatialReference&&(e.extent={xmin:0,ymin:0,xmax:0,ymax:0,spatialReference:r.spatialReference})}catch(r){p(r)}return e}async _ensureLatestMetadata(e){if(this.layer.userHasUpdateItemPrivileges&&this.sourceJSON.cacheMaxAge>0)return this._fetchService(null,{...e,cacheBust:!0})}async _uploadMeshesAndGetAssetMapEditsJSON(e){const{addAssetFeatures:t}=e;if(!t?.length)return null;const s=await this._filterRedundantAssetMaps(t);if(!t?.length)return null;const r=new Array,a=new Map;for(const i of s){const{geometry:e}=i,{vertexSpace:t}=e;if(w(t))r.push(e);else{const t=S(e);a.set(t,e),i.geometry=t,r.push(t)}}await this.uploadAssets(r);for(const[i,o]of a)o.addExternalSources(i.metadata.externalSources.items);return{adds:this._getAssetMapEditsJSON(s),updates:[],deletes:[]}}_getAssetMapEditsJSON(e){const t=new Array,s=this.layer.globalIdField,r=this.layer.parsedUrl;for(const a of e){const e=a.geometry,{metadata:i}=e,o=i.getExternalSourcesOnService(r),n=a.getAttribute(s);if(0===o.length){u.getLogger(this).error(`Skipping feature ${n}. The mesh it is associated with has not been uploaded to the service and cannot be mapped to it.`);continue}const{source:l}=o.find(q)??o[0];for(const s of l)1===s.parts.length?t.push({globalId:h(),parentGlobalId:n,assetName:s.assetName,assetHash:s.parts[0].partHash,flags:[]}):u.getLogger(this).error(`Skipping asset ${s.assetName}. It does not have exactly one part, so we cannot map it to a feature.`)}return t}_createEditsResult(e){const t=e.data,{layerId:s}=this.layer,r=[];let a=null;if(Array.isArray(t))for(const o of t)r.push({id:o.id,editedFeatures:o.editedFeatures}),o.id===s&&(a={addResults:o.addResults??[],updateResults:o.updateResults??[],deleteResults:o.deleteResults??[],attachments:o.attachments,editMoment:o.editMoment});else a=t;const i=F(a);if(r.length>0){i.editedFeatureResults=[];for(const e of r){const{editedFeatures:t}=e,s=t?.spatialReference?new C(t.spatialReference):null;i.editedFeatureResults.push({layerId:e.id,editedFeatures:_(t,s)})}}return i}_createAttachmentErrorResult(e,t){const s=t.details.messages?.[0]||t.message,r=t.details.httpStatus||t.details.messageCode;return{objectId:e,globalId:null,error:new i(\"feature-layer-source:attachment-failure\",s,{code:r})}}_getFormDataForAttachment(e,t){const s=e instanceof FormData?e:e&&e.elements?new FormData(e):null;if(s)for(const r in t){const e=t[r];null!=e&&(s.set?s.set(r,e):s.append(r,e))}return s}_getLayerRequestOptions(e={}){const{parsedUrl:t,gdbVersion:s,dynamicDataSource:r}=this.layer;return{...e,query:{gdbVersion:s,layer:r?JSON.stringify({source:r}):void 0,...t.query,f:\"json\",...this._createRequestQueryOptions(e)},responseType:\"json\"}}async _filterRedundantAssetMaps(e){const{layer:t}=this,{globalIdField:s,infoFor3D:r,parsedUrl:i}=t;if(null==r||null==s)return e;const o=T(r);if(null==o)return e;const n=y(i.path,`../${o.id}`),u=new Array,l=new Array;for(const a of e)a.geometry.metadata.getExternalSourcesOnService(i).length>0?l.push(a):u.push(a);const c=l.map((e=>e.getAttribute(s))).filter(a);if(0===c.length)return e;const{assetMapFieldRoles:{parentGlobalId:d,assetHash:p}}=r,h=new U;h.where=`${d} IN (${c.map((e=>`'${e}'`))})`,h.outFields=[p,d],h.returnGeometry=!1;const m=await N(n,h),{features:f}=m;return 0===f.length?e:[...u,...l.filter((e=>{const t=e.getAttribute(s);if(!t)return!0;const{metadata:r}=e.geometry,a=f.filter((e=>e.getAttribute(d)===t));if(0===a.length)return!0;const o=a.map((e=>e.getAttribute(p)));return r.getExternalSourcesOnService(i).flatMap((({source:e})=>e.flatMap((e=>e.parts.map((e=>e.partHash)))))).some((e=>o.every((t=>e!==t))))}))]}};e([m()],V.prototype,\"type\",void 0),e([m({constructOnly:!0})],V.prototype,\"layer\",void 0),e([m({readOnly:!0})],V.prototype,\"queryTask\",null),V=e([f(\"esri.layers.graphics.sources.FeatureLayerSource\")],V);const G=1e3,H=V;export{H as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport has from\"../../../../core/has.js\";import{clone as t}from\"../../../../core/lang.js\";import{queryCapabilities as s}from\"../../data/QueryEngineCapabilities.js\";import{defaultPointSymbolJSON as e,defaultPolylineSymbolJSON as r,defaultPolygonSymbolJSON as p}from\"../../../../symbols/support/defaultsJSON.js\";function o(t){return{renderer:{type:\"simple\",symbol:\"esriGeometryPoint\"===t||\"esriGeometryMultipoint\"===t?e:\"esriGeometryPolyline\"===t?r:p}}}const u=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let n=1;function i(t,s){if(has(\"esri-csp-restrictions\"))return()=>({[s]:null,...t});try{let e=`this.${s} = null;`;for(const s in t){e+=`this${u.test(s)?`.${s}`:`[\"${s}\"]`} = ${JSON.stringify(t[s])};`}const r=new Function(`\\n      return class AttributesClass$${n++} {\\n        constructor() {\\n          ${e};\\n        }\\n      }\\n    `)();return()=>new r}catch(e){return()=>({[s]:null,...t})}}function a(s={}){return[{name:\"New Feature\",description:\"\",prototype:{attributes:t(s)}}]}function l(t,e){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:t},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:e,supportsDelete:e,supportsEditing:e,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:e,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:s,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:e,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}}export{l as createCapabilities,i as createDefaultAttributesFunction,a as createDefaultTemplate,o as createDrawingInfo};\n"],"names":["t","supportsStatistics","supportsPercentileStatistics","supportsSpatialAggregationStatistics","supportedSpatialAggregationStatistics","envelope","centroid","convexHull","supportsCentroid","supportsCacheHint","supportsDistance","supportsDistinct","supportsExtent","supportsGeometryProperties","supportsHavingClause","supportsOrderBy","supportsPagination","supportsQuantization","supportsQuantizationEditMode","supportsQueryGeometry","supportsResultType","supportsSqlExpression","supportsMaxRecordCountFactor","supportsStandardizedQueriesOnly","supportsTopFeaturesQuery","supportsQueryByAnonymous","supportsQueryByOthers","supportsHistoricMoment","supportsFormatPBF","supportsDisjointSpatialRelationship","supportsDefaultSpatialReference","supportsFullTextSearch","supportsCompactGeometry","maxRecordCountFactor","maxRecordCount","standardMaxRecordCount","tileMaxRecordCount","F","e","applyEdits","A","objectId","v","every","I","globalId","$","async","E","a","n","s","arguments","length","undefined","o","gdbVersion","l","h","url","m","layerId","returnServiceEditsOption","i","promise","then","addedFeatures","updatedFeatures","deletedFeatures","addedAttachments","updatedAttachments","deletedAttachments","emit","result","results","edits","r","load","type","layer","b","options","w","addFeatures","updateFeatures","deleteFeatures","addAttachments","updateAttachments","deleteAttachments","infoFor3D","editing","supportsGlobalId","globalIdUsed","M","data","isVersioned","supportsRollbackOnFailure","rollbackOnFailureEnabled","d","getLogger","warn","supportsReturnServiceEditsInSourceSpatialReference","returnServiceEditsInSourceSR","u","Array","from","isCollection","toArray","G","operations","supportsAdd","supportsUpdate","supportsDelete","map","x","addAssetFeatures","V","p","c","fields","filter","globalIdField","forEach","attributes","T","j","O","U","geometry","supportsGeometryUpdate","L","k","B","y","supportedFormats","g","editFormats","includes","q","push","z","D","R","addFeatureResults","updateFeatureResults","deleteFeatureResults","addAttachmentResults","updateAttachmentResults","deleteAttachmentResults","S","error","exceededTransferLimit","historicMoment","editMoment","Date","globalIdToObjectId","editedFeatureResults","editedFeatures","resolve","reject","name","f","Number","MAX_SAFE_INTEGER","feature","hasZ","capabilities","supportsZ","hasM","supportsM","spatialReference","vertexSpace","wkid","attachment","uploadId","File","supportsUploadWithItemId","isBase64","concat","slice","W","uploadAssets","transformFieldRoles","origin","transform","isGeographic","originX","originY","originZ","translation","scale","rotation","translationX","translationY","translationZ","scaleX","scaleY","scaleZ","rotationX","rotationY","rotationZ","rotationDeg","toJSON","Promise","all","adds","updates","deletes","contentType","parentGlobalId","mediaType","success","code","description","original","current","originalAndCurrentFeatures","none","P","Set","Started","Publishing","Stopped","constructor","super","this","refresh","sourceJSON","editingInfo","lastEditDate","dataChanged","_fetchService","extent","_ongoingAssetUploads","Map","setUserPrivileges","serviceItemId","_ensureLatestMetadata","addResolvingPromise","queryTask","parsedUrl","dynamicDataSource","fieldsIndex","has","query","supportsQueryAttachments","path","pbfSupported","sourceSpatialReference","queryAttachmentsSupported","addAttachment","objectIdField","_getLayerRequestOptions","_getFormDataForAttachment","body","addAttachmentResult","_createAttachmentErrorResult","updateAttachment","attachmentId","updateAttachmentResult","_uploadMeshesAndGetAssetMapEditsJSON","getAttribute","supportsAsyncApplyEdits","rollbackOnFailure","useGlobalIds","returnEditMoment","usePreviousEditMoment","J","JSON","stringify","id","attachments","assetMaps","join","method","authMode","sessionId","Q","_","_asyncApplyEdits","details","raw","extendedCode","supportsEditing","effectiveCapabilities","findCredential","refreshToken","_createEditsResult","attachmentIds","fetchRecomputedExtents","signal","returnUpdates","fullExtent","timeExtent","fromJSON","start","end","queryAttachments","executeAttachmentQuery","queryFeatures","execute","_createRequestQueryOptions","outStatistics","features","_ref","outStatisticFieldName","toLowerCase","queryFeaturesJSON","executeJSON","queryObjectIds","executeForIds","queryFeatureCount","executeForCount","queryExtent","executeForExtent","queryRelatedFeatures","executeRelationshipQuery","queryRelatedFeaturesCount","executeRelationshipQueryForCount","queryTopFeatures","executeTopFeaturesQuery","queryTopObjectIds","executeForTopIds","queryTopExtents","executeForTopExtents","queryTopCount","executeForTopCount","fetchPublishingStatus","status","ongoingUploads","statusUrl","responseType","resultUrl","customParameters","token","apiKey","datesInUnknownTimezone","timeReferenceUnknownClient","returnAdvancedSymbols","cacheBust","_ts","now","_patchServiceJSON","geometryType","drawingInfo","renderer","defaultSymbol","xmin","ymin","xmax","ymax","userHasUpdateItemPrivileges","cacheMaxAge","_filterRedundantAssetMaps","set","addExternalSources","metadata","externalSources","items","_getAssetMapEditsJSON","getExternalSourcesOnService","source","find","parts","assetName","assetHash","partHash","flags","isArray","addResults","updateResults","deleteResults","C","messages","message","httpStatus","messageCode","FormData","elements","append","assetMapFieldRoles","where","outFields","returnGeometry","N","flatMap","_ref2","some","prototype","constructOnly","readOnly","H","symbol","test","Function","analytics","supportsAttachment","supportsAdvancedFieldProperties","supportsCalculate","supportsTruncate","supportsValidateSql","supportsChangeTracking","supportsQuery","supportsQueryAnalytics","supportsQueryTopFeatures","supportsResizeAttachments","supportsSync","supportsExceedsLimitStatistics","supportsAsyncConvert3D","queryRelated","supportsCount","supportsUpdateWithoutM","supportsDeleteByAnonymous","supportsDeleteByOthers","supportsUpdateByAnonymous","supportsUpdateByOthers","zDefault"],"sourceRoot":""}