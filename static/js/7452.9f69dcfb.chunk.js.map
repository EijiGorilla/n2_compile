{"version":3,"file":"static/js/7452.9f69dcfb.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/layers/buildingSublayers/BuildingComponentSublayer.js","../node_modules/@arcgis/core/layers/buildingSublayers/BuildingGroupSublayer.js","../node_modules/@arcgis/core/layers/buildingSublayers/BuildingSublayer.js","../node_modules/@arcgis/core/views/3d/layers/BuildingSublayerView3D.js","../node_modules/@arcgis/core/views/3d/layers/i3s/BuildingFilterUtil.js","../node_modules/@arcgis/core/views/layers/BuildingComponentSublayerView.js","../node_modules/@arcgis/core/views/3d/layers/BuildingComponentSublayerView3D.js","../node_modules/@arcgis/core/views/layers/BuildingSceneLayerView.js","../node_modules/@arcgis/core/views/3d/layers/BuildingSceneLayerView3D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../Graphic.js\";import t from\"../../PopupTemplate.js\";import\"../../renderers/ClassBreaksRenderer.js\";import\"../../renderers/DictionaryRenderer.js\";import\"../../renderers/DotDensityRenderer.js\";import\"../../renderers/HeatmapRenderer.js\";import\"../../renderers/PieChartRenderer.js\";import\"../../renderers/Renderer.js\";import\"../../renderers/SimpleRenderer.js\";import\"../../renderers/UniqueValueRenderer.js\";import\"../../renderers/support/jsonUtils.js\";import{webSceneRendererTypes as o}from\"../../renderers/support/types.js\";import s from\"../../request.js\";import i from\"../../core/Error.js\";import{JSONMap as a}from\"../../core/jsonMap.js\";import n from\"../../core/Loadable.js\";import p from\"../../core/Logger.js\";import{EsriPromiseMixin as l}from\"../../core/Promise.js\";import{property as d}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/RandomLCG.js\";import{enumeration as u}from\"../../core/accessorSupport/decorators/enumeration.js\";import{reader as y}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as c}from\"../../core/accessorSupport/decorators/subclass.js\";import m from\"../../geometry/Extent.js\";import h from\"../../geometry/SpatialReference.js\";import f from\"../FeatureLayer.js\";import g from\"./BuildingSublayer.js\";import{TemporalSceneLayer as j}from\"../mixins/TemporalSceneLayer.js\";import{zeroCapabilities as v}from\"../support/capabilities.js\";import{popupEnabled as b}from\"../support/commonProperties.js\";import{defineFieldProperties as L}from\"../support/fieldProperties.js\";import S from\"../support/FieldsIndex.js\";import{unpackFieldNames as I}from\"../support/fieldUtils.js\";import{fetchIndexInfo as F}from\"../support/I3SIndexInfo.js\";import{I3SNodePageDefinition as w,I3SMaterialDefinition as x,I3STextureSetDefinition as O,I3SGeometryDefinition as P}from\"../support/I3SLayerDefinitions.js\";import T from\"../../rest/support/Query.js\";import{createPopupTemplate as q}from\"../../support/popupUtils.js\";import R from\"../../symbols/support/ElevationInfo.js\";import{queryAttributesFromCachedAttributesId as U}from\"../../views/3d/layers/i3s/I3SUtil.js\";import{getRequiredFields as D,getFetchPopupTemplate as Q}from\"../../views/layers/support/popupUtils.js\";const E=L();let A=class extends(j(n.LoadableMixin(l(g)))){constructor(e){super(e),this.type=\"building-component\",this.nodePages=null,this.materialDefinitions=[],this.textureSetDefinitions=[],this.geometryDefinitions=[],this.indexInfo=null,this.serviceUpdateTimeStamp=null,this.store=null,this.attributeStorageInfo=[],this.fields=[],this.associatedLayer=null,this.outFields=null,this.listMode=\"show\",this.renderer=null,this.definitionExpression=null,this.popupEnabled=!0,this.popupTemplate=null,this.layerType=\"3d-object\"}get parsedUrl(){return this.layer?{path:`${this.layer.parsedUrl?.path}/sublayers/${this.id}`,query:this.layer.parsedUrl?.query}:{path:\"\"}}get fieldsIndex(){return new S(this.fields)}readAssociatedLayer(e,r){const t=this.layer.associatedFeatureServiceItem,o=r.associatedLayerID;return null!=t&&\"number\"==typeof o?new f({portalItem:t,customParameters:this.customParameters,layerId:o}):null}get objectIdField(){if(null!=this.fields)for(const e of this.fields)if(\"oid\"===e.type)return e.name;return null}get displayField(){return null!=this.associatedLayer?this.associatedLayer.displayField:void 0}get apiKey(){return this.layer.apiKey}get customParameters(){return this.layer.customParameters}get fullExtent(){return this.layer.fullExtent}get spatialReference(){return this.layer.spatialReference}get version(){return this.layer.version}get elevationInfo(){return this.layer.elevationInfo}get minScale(){return this.layer.minScale}get maxScale(){return this.layer.maxScale}get effectiveScaleRange(){return this.layer.effectiveScaleRange}get defaultPopupTemplate(){return this.createPopupTemplate()}load(e){const r=null!=e?e.signal:null,t=this._fetchService(r).then((()=>{this.indexInfo=F(this.parsedUrl.path,this.rootNode,this.nodePages,this.customParameters,this.apiKey,p.getLogger(this),r)}));return this.addResolvingPromise(t),Promise.resolve(this)}createPopupTemplate(e){return q(this,e)}async _fetchService(e){const r=(await s(this.parsedUrl.path,{query:{f:\"json\",...this.customParameters,token:this.apiKey},responseType:\"json\",signal:e})).data;this.read(r,{origin:\"service\",url:this.parsedUrl})}getField(e){return this.fieldsIndex.get(e)}getFieldDomain(e,r){const t=this.getFeatureType(r?.feature)?.domains?.[e];return t&&\"inherited\"!==t.type?t:this.getField(e)?.domain??null}getFeatureType(e){return e&&null!=this.associatedLayer?this.associatedLayer.getFeatureType(e):null}get types(){return null!=this.associatedLayer?this.associatedLayer.types??[]:[]}get typeIdField(){return null!=this.associatedLayer?this.associatedLayer.typeIdField:null}get geometryType(){return\"3d-object\"===this.layerType?\"mesh\":\"point\"}get profile(){return\"3d-object\"===this.layerType?\"mesh-pyramids\":\"points\"}get capabilities(){const e=null!=this.associatedLayer&&this.associatedLayer.capabilities?this.associatedLayer.capabilities:v,{query:r,data:{supportsZ:t,supportsM:o,isVersioned:s}}=e;return{query:r,data:{supportsZ:t,supportsM:o,isVersioned:s}}}createQuery(){const e=new T;return\"mesh\"!==this.geometryType&&(e.returnGeometry=!0,e.returnZ=!0),e.where=this.definitionExpression||\"1=1\",e.sqlFormat=\"standard\",e}queryExtent(e,r){return this._getAssociatedLayerForQuery().then((t=>t.queryExtent(e||this.createQuery(),r)))}queryFeatureCount(e,r){return this._getAssociatedLayerForQuery().then((t=>t.queryFeatureCount(e||this.createQuery(),r)))}queryFeatures(e,r){return this._getAssociatedLayerForQuery().then((t=>t.queryFeatures(e||this.createQuery(),r))).then((e=>{if(e?.features)for(const r of e.features)r.layer=this.layer,r.sourceLayer=this;return e}))}queryObjectIds(e,r){return this._getAssociatedLayerForQuery().then((t=>t.queryObjectIds(e||this.createQuery(),r)))}async queryCachedAttributes(e,r){const t=I(this.fieldsIndex,await D(this,Q(this)));return U(this.parsedUrl.path,this.attributeStorageInfo,e,r,t,this.apiKey,this.customParameters)}async queryCachedFeature(e,t){const o=await this.queryCachedAttributes(e,[t]);if(!o||0===o.length)throw new i(\"scenelayer:feature-not-in-cached-data\",\"Feature not found in cached data\");const s=new r;return s.attributes=o[0],s.layer=this,s.sourceLayer=this,s}getFieldUsageInfo(e){return this.fieldsIndex.has(e)?{supportsLabelingInfo:!1,supportsRenderer:!1,supportsPopupTemplate:!1,supportsLayerQuery:!1}:{supportsLabelingInfo:!1,supportsRenderer:!0,supportsPopupTemplate:!0,supportsLayerQuery:null!=this.associatedLayer}}_getAssociatedLayerForQuery(){const e=this.associatedLayer;return null!=e&&e.loaded?Promise.resolve(e):this._loadAssociatedLayerForQuery()}async _loadAssociatedLayerForQuery(){if(await this.load(),null==this.associatedLayer)throw new i(\"buildingscenelayer:query-not-available\",\"BuildingSceneLayer component layer queries are not available without an associated feature layer\",{layer:this});try{await this.associatedLayer.load()}catch(e){throw new i(\"buildingscenelayer:query-not-available\",\"BuildingSceneLayer associated feature layer could not be loaded\",{layer:this,error:e})}return this.associatedLayer}};e([d({readOnly:!0})],A.prototype,\"parsedUrl\",null),e([d({type:w,readOnly:!0})],A.prototype,\"nodePages\",void 0),e([d({type:[x],readOnly:!0})],A.prototype,\"materialDefinitions\",void 0),e([d({type:[O],readOnly:!0})],A.prototype,\"textureSetDefinitions\",void 0),e([d({type:[P],readOnly:!0})],A.prototype,\"geometryDefinitions\",void 0),e([d({readOnly:!0})],A.prototype,\"serviceUpdateTimeStamp\",void 0),e([d({readOnly:!0})],A.prototype,\"store\",void 0),e([d({type:String,readOnly:!0,json:{read:{source:\"store.rootNode\"}}})],A.prototype,\"rootNode\",void 0),e([d({readOnly:!0})],A.prototype,\"attributeStorageInfo\",void 0),e([d(E.fields)],A.prototype,\"fields\",void 0),e([d({readOnly:!0})],A.prototype,\"fieldsIndex\",null),e([d({readOnly:!0,type:f})],A.prototype,\"associatedLayer\",void 0),e([y(\"service\",\"associatedLayer\",[\"associatedLayerID\"])],A.prototype,\"readAssociatedLayer\",null),e([d(E.outFields)],A.prototype,\"outFields\",void 0),e([d({type:String,readOnly:!0})],A.prototype,\"objectIdField\",null),e([d({readOnly:!0,type:String,json:{read:!1}})],A.prototype,\"displayField\",null),e([d({readOnly:!0,type:String})],A.prototype,\"apiKey\",null),e([d({readOnly:!0,type:String})],A.prototype,\"customParameters\",null),e([d({readOnly:!0,type:m})],A.prototype,\"fullExtent\",null),e([d({readOnly:!0,type:h})],A.prototype,\"spatialReference\",null),e([d({readOnly:!0})],A.prototype,\"version\",null),e([d({readOnly:!0,type:R})],A.prototype,\"elevationInfo\",null),e([d({readOnly:!0,type:Number})],A.prototype,\"minScale\",null),e([d({readOnly:!0,type:Number})],A.prototype,\"maxScale\",null),e([d({readOnly:!0,type:Number})],A.prototype,\"effectiveScaleRange\",null),e([d({type:[\"hide\",\"show\"],json:{write:!0}})],A.prototype,\"listMode\",void 0),e([d({types:o,json:{origins:{service:{read:{source:\"drawingInfo.renderer\"}}},name:\"layerDefinition.drawingInfo.renderer\",write:!0},value:null})],A.prototype,\"renderer\",void 0),e([d({type:String,json:{origins:{service:{read:!1,write:!1}},name:\"layerDefinition.definitionExpression\",write:{enabled:!0,allowNull:!0}}})],A.prototype,\"definitionExpression\",void 0),e([d(b)],A.prototype,\"popupEnabled\",void 0),e([d({type:t,json:{read:{source:\"popupInfo\"},write:{target:\"popupInfo\"}}})],A.prototype,\"popupTemplate\",void 0),e([d({readOnly:!0,type:String,json:{origins:{service:{read:{source:\"store.normalReferenceFrame\"}}},read:!1}})],A.prototype,\"normalReferenceFrame\",void 0),e([d({readOnly:!0,json:{read:!1}})],A.prototype,\"defaultPopupTemplate\",null),e([d()],A.prototype,\"types\",null),e([d()],A.prototype,\"typeIdField\",null),e([d({json:{write:!1}}),u(new a({\"3DObject\":\"3d-object\",Point:\"point\"}))],A.prototype,\"layerType\",void 0),e([d()],A.prototype,\"geometryType\",null),e([d()],A.prototype,\"profile\",null),e([d({readOnly:!0,json:{read:!1}})],A.prototype,\"capabilities\",null),A=e([c(\"esri.layers.buildingSublayers.BuildingComponentSublayer\")],A);const _=A;export{_ as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Collection.js\";import{loadAllChildren as o}from\"../../core/loadAll.js\";import s from\"../../core/Warning.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as i}from\"../../core/accessorSupport/decorators/subclass.js\";import n from\"./BuildingComponentSublayer.js\";import u from\"./BuildingSublayer.js\";var a;const l={type:e,readOnly:!0,json:{origins:{service:{read:{source:\"sublayers\",reader:p}}},read:!1}};function p(r,o,t){if(r&&Array.isArray(r))return new e(r.map((r=>{const e=y(r);if(e){const o=new e;return o.read(r,t),o}return t?.messages&&r&&t.messages.push(new s(\"building-scene-layer:unsupported-sublayer-type\",\"Building scene sublayer of type '\"+(r.type||\"unknown\")+\"' are not supported\",{definition:r,context:t})),null})))}let c=a=class extends u{constructor(r){super(r),this.type=\"building-group\",this.listMode=\"show\",this.sublayers=null}loadAll(){return o(this,(r=>a.forEachSublayer(this.sublayers,(e=>{\"building-group\"!==e.type&&r(e)}))))}};function y(r){return\"group\"===r.layerType?c:n}r([t({type:[\"hide\",\"show\",\"hide-children\"],json:{write:!0}})],c.prototype,\"listMode\",void 0),r([t(l)],c.prototype,\"sublayers\",void 0),c=a=r([i(\"esri.layers.buildingSublayers.BuildingGroupSublayer\")],c),function(r){function e(r,o){r.forEach((r=>{o(r),\"building-group\"===r.type&&e(r.sublayers,o)}))}r.sublayersProperty=l,r.readSublayers=p,r.forEachSublayer=e}(c||(c={}));const d=c;export{d as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{IdentifiableMixin as o}from\"../../core/Identifiable.js\";import{MultiOriginJSONSupport as r}from\"../../core/MultiOriginJSONSupport.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import{Integer as i}from\"../../core/accessorSupport/ensureType.js\";import\"../../core/RandomLCG.js\";import\"../../core/has.js\";import{reader as s}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as p}from\"../../core/accessorSupport/decorators/subclass.js\";import{readOnlyService as l}from\"../support/commonProperties.js\";let n=class extends(o(r)){constructor(e){super(e),this.title=\"\",this.id=-1,this.modelName=null,this.isEmpty=null,this.legendEnabled=!0,this.visible=!0,this.opacity=1}readTitle(e,o){return\"string\"==typeof o.alias?o.alias:\"string\"==typeof o.name?o.name:\"\"}readIdOnlyOnce(e){return-1!==this.id?this.id:\"number\"==typeof e?e:-1}};e([t({type:String,json:{origins:{\"web-scene\":{write:!0},\"portal-item\":{write:!0}}}})],n.prototype,\"title\",void 0),e([s(\"service\",\"title\",[\"alias\",\"name\"])],n.prototype,\"readTitle\",null),e([t()],n.prototype,\"layer\",void 0),e([t({type:i,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],n.prototype,\"id\",void 0),e([s(\"service\",\"id\")],n.prototype,\"readIdOnlyOnce\",null),e([t(l(String))],n.prototype,\"modelName\",void 0),e([t(l(Boolean))],n.prototype,\"isEmpty\",void 0),e([t({type:Boolean,nonNullable:!0})],n.prototype,\"legendEnabled\",void 0),e([t({type:Boolean,json:{name:\"visibility\",write:!0}})],n.prototype,\"visible\",void 0),e([t({type:Number,json:{write:!0}})],n.prototype,\"opacity\",void 0),n=e([p(\"esri.layers.buildingSublayers.BuildingSublayer\")],n);const a=n;export{a as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Evented.js\";import{IdentifiableMixin as r}from\"../../../core/Identifiable.js\";import{EsriPromiseMixin as s}from\"../../../core/Promise.js\";import{property as i}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";const p=(p,l)=>{let n=class extends(s(r(t.EventedMixin(p)))){constructor(e){super(e),this.sublayer=null,this.parent=null,this.view=null}initialize(){}get suspended(){return!this.canResume()}get updating(){return!this.suspended&&this.isUpdating()}get visible(){return!!this.sublayer?.visible}set visible(e){this._overrideIfSome(\"visible\",e)}get fullOpacity(){const e=e=>null!=e?e:1;return e(this.sublayer?.opacity)*e(this.parent?.fullOpacity)}canResume(){return!this.parent?.suspended&&this.view?.ready&&this.visible||!1}isUpdating(){return!1}};return e([i()],n.prototype,\"sublayer\",void 0),e([i()],n.prototype,\"parent\",void 0),e([i({readOnly:!0})],n.prototype,\"suspended\",null),e([i({type:Boolean,readOnly:!0})],n.prototype,\"updating\",null),e([i()],n.prototype,\"view\",void 0),e([i()],n.prototype,\"visible\",null),e([i()],n.prototype,\"fullOpacity\",null),n=e([o(\"esri.views.3d.layers.BuildingSublayerView3D\")],n),n};export{p as BuildingSublayerView3DMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{clone as e}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{createMaterialFromEdges as r}from\"../support/edgeUtils.js\";import{ColorMixModeEnum as o}from\"../support/symbolColorUtils.js\";var a;!function(e){e[e.Solid=0]=\"Solid\",e[e.WireFrame=1]=\"WireFrame\",e[e.XRay=2]=\"XRay\"}(a||(a={}));const l=.15,t=.5*l;function i(e){switch(e.filterMode.type){case\"solid\":return{mode:a.Solid};case\"wire-frame\":return{mode:a.WireFrame,edgeMaterial:r(e.filterMode.edges,{})};case\"x-ray\":return{mode:a.XRay}}}function c(e,r){if(null==r)return e.color[3]=0,e.edgeMaterial=null,void(e.pickable=!1);switch(r.mode){case a.Solid:return;case a.WireFrame:return e.color[3]=0,e.edgeMaterial=r.edgeMaterial,void(e.pickable=!1);case a.XRay:return e.color[0]=1,e.color[1]=1,e.color[2]=1,e.color[3]*=l,e.colorMixMode=o.Replace,e.castShadows=!1,e.pickable=!1,void(e.edgeMaterial=n(e.edgeMaterial))}}function n(e){return null==e?null:(d.lastMaterial!==e&&(d.cachedMaterial=s(e),d.lastMaterial=e),d.cachedMaterial)}function s(r){const o=e(r.color);return o[3]*=t,{...r,color:o}}const d={cachedMaterial:null,lastMaterial:null};export{a as FilterModeEnum,c as applyFilterMode,i as parseFilterMode};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Accessor.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import\"../../core/accessorSupport/interfaces.js\";import\"../../core/accessorSupport/tracking/Flags.js\";import\"../../core/Warning.js\";import\"../../core/Error.js\";class o extends e{constructor(){super(...arguments),this.sublayer=null}get updating(){return!1}get suspended(){return!1}get availableFields(){return[]}get filter(){return null}set filter(r){throw new Error(\"Not implemented\")}queryFeatures(r,e){throw new Error(\"Not implemented\")}queryObjectIds(r,e){throw new Error(\"Not implemented\")}queryFeatureCount(r,e){throw new Error(\"Not implemented\")}createQuery(){throw new Error(\"Not implemented\")}queryExtent(r,e){throw new Error(\"Not implemented\")}highlight(r){throw new Error(\"Not implemented\")}}r([t()],o.prototype,\"sublayer\",void 0),r([t()],o.prototype,\"availableFields\",null),r([t()],o.prototype,\"filter\",null);export{o as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import r from\"../../../Graphic.js\";import t from\"../../../core/Error.js\";import i from\"../../../core/Logger.js\";import{destroyMaybe as s}from\"../../../core/maybe.js\";import{throwIfAborted as l,throwIfAbortError as n}from\"../../../core/promiseUtils.js\";import{syncAndInitial as a,initial as o}from\"../../../core/reactiveUtils.js\";import{property as u}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/RandomLCG.js\";import{subclass as d}from\"../../../core/accessorSupport/decorators/subclass.js\";import{WhereClause as p}from\"../../../core/sql/WhereClause.js\";import\"../../../layers/buildingSublayers/BuildingComponentSublayer.js\";import h from\"../../../layers/support/FeatureFilter.js\";import{fixFields as y,unpackFieldNames as c,populateMissingFields as f}from\"../../../layers/support/fieldUtils.js\";import m from\"../../../rest/support/Query.js\";import{BuildingSublayerView3DMixin as g}from\"./BuildingSublayerView3D.js\";import{I3SMeshView3D as F}from\"./I3SMeshView3D.js\";import{ForAllFeaturesMode as b}from\"./II3SMeshView3D.js\";import{applyFilterMode as _}from\"./i3s/BuildingFilterUtil.js\";import{createGetFeatureExtent as E}from\"./i3s/I3SGeometryUtil.js\";import{I3SMeshViewFilter as w}from\"./i3s/I3SMeshViewFilter.js\";import{I3SQueryEngine as x}from\"./i3s/I3SQueryEngine.js\";import{I3SQueryFeatureAdapter as S}from\"./i3s/I3SQueryFeatureAdapter.js\";import{I3SQueryFeatureStore as j}from\"./i3s/I3SQueryFeatureStore.js\";import{findFieldsCaseInsensitive as v,getIndexCrs as I}from\"./i3s/I3SUtil.js\";import{DefinitionExpressionSceneLayerView as Q}from\"./support/DefinitionExpressionSceneLayerView.js\";import{TemporalSceneLayerView as q}from\"./support/TemporalSceneLayerView.js\";import L from\"../../layers/BuildingComponentSublayerView.js\";import{hasPopupTemplate as R,getRequiredFields as V,getFetchPopupTemplate as U}from\"../../layers/support/popupUtils.js\";import{TaskPriority as A}from\"../../support/Scheduler.js\";let C=class extends(q(Q(F(g(L))))){constructor(){super(...arguments),this.type=\"building-component-sublayer-3d\",this.layerView=null,this._elevationContext=\"scene\",this._isIntegratedMesh=!1,this._supportsLabeling=!1,this.requiredFields=[],this.progressiveLoadFactor=1,this._queryEngine=null}get i3slayer(){return this.sublayer}get layerUid(){return this.sublayer.layer.uid}get sublayerUid(){return this.sublayer.uid}get layerId(){return this.sublayer.layer.id}get sublayerId(){return this.sublayer.id}get layerPopupEnabledAndHasTemplate(){return this.sublayer.popupEnabled&&R(this.sublayer,this.layerView?.view.popup?.defaultPopupTemplateEnabled)}initialize(){this._updatingHandles.add((()=>this.mergedFilter),(e=>{null!=e&&w.checkSupport(e)?null==this._i3sFilter?this._i3sFilter=new w({viewFilter:e,layerFieldsIndex:this.sublayer.fieldsIndex,loadAsyncModule:e=>this._loadAsyncModule(e),addSqlFilter:(e,r)=>this.addSqlFilter(e,r,this.logError),addTimeFilter:(e,r)=>this.addTimeFilter(e,r)}):this._i3sFilter.viewFilter=e:this._i3sFilter=s(this._i3sFilter)}),a),this._updatingHandles.add((()=>[this.sublayer.renderer,this.definitionExpressionFields,this.filterExpressionFields,this.timeFilterFields]),(()=>this._updateRequiredFields())),this._updatingHandles.add((()=>this.sublayer.renderer),(e=>this._rendererChange(e)),o);const e=()=>this._filterChange();this._updatingHandles.add((()=>this.parsedDefinitionExpression),e),this._updatingHandles.add((()=>this._i3sFilter?.sortedObjectIds),e),this._updatingHandles.add((()=>this._i3sFilter?.parsedWhereClause),e),this._updatingHandles.add((()=>this.getTimeFilterDependencies()),e),this._updatingHandles.add((()=>this.mergedFilter),e),this._updatingHandles.add((()=>[this._i3sFilter?.parsedGeometry,this.filter?.spatialRelationship]),(()=>this._geometryFilterChange())),this._updatingHandles.add((()=>this.parsedFilterExpressions),(()=>this._updateSymbologyOverride()),o),this.addResolvingPromise(this._updateRequiredFields())}get lodFactor(){return this.view.qualitySettings.sceneService.object.lodFactor}get parsedFilterExpressions(){return\"Overview\"!==this.sublayer.modelName&&this.layerView?this.layerView.filterExpressions.map((([e,r])=>{let t;try{t=p.create(e,this.sublayer.fieldsIndex)}catch(n){return i.getLogger(this).error(\"Failed to parse filterExpression: \"+n),null}if(!t.isStandardized)return i.getLogger(this).error(\"filterExpression is using non standard function\"),null;const s=[],l=t.fieldNames;return v(l,this.sublayer.fields,{missingFields:s}),s.length>0?(i.getLogger(this).error(`filterExpression references unknown fields: ${s.join(\", \")}`),null):[t,r]})).filter((e=>null!=e)):[]}get filter(){return this._get(\"filter\")}set filter(e){this._set(\"filter\",w.checkSupport(e)?e:null)}isUpdating(){return super.isUpdating()||(this._i3sFilter?.updating??!1)}_updateSymbologyOverride(){const e=this.parsedFilterExpressions;e.length>0?this._setSymbologyOverride(((r,t)=>{for(const[s,l]of e)try{if(s.testFeature(r))return _(t,l)}catch(i){this.logError(i)}return _(t,null)}),this.filterExpressionFields):this._setSymbologyOverride(null,null)}get filterExpressionFields(){return y(this.sublayer.fieldsIndex,this.parsedFilterExpressions.reduce(((e,[r])=>e.concat(r.fieldNames)),new Array))}get timeFilterFields(){const{timeExtent:e}=this,{timeInfo:r,fieldsIndex:t}=this.sublayer;if(null==e||null==r)return[];const{startField:i,endField:s}=r;return y(t,[i,s])}get availableFields(){const e=this.sublayer,r=e.fieldsIndex;let t=this.requiredFields;if(e.outFields||e.layer.outFields){const i=[...e.outFields||[],...e.layer.outFields||[]];t=[...c(r,i),...t]}return y(r,t)}_createLayerGraphic(e){const t=new r(null,null,e);return t.layer=this.sublayer.layer,t.sourceLayer=this.sublayer,t}canResume(){return super.canResume()&&(!this._controller||this._controller.rootNodeVisible)}async fetchPopupFeaturesFromGraphics(e,r){const t=this._validateFetchPopupFeatures(r);if(t)throw t;if(0===e.length)return[];const s=[],a=[],o=null!=this.sublayer.associatedLayer?await this.sublayer.associatedLayer.load(r):this.sublayer,u=c(this.sublayer.fieldsIndex,await V(o,U(this.sublayer,r)));l(r);const d=new Set;for(const i of e)f(u,i,d)?a.push(i):s.push(i);return 0===a.length?s:(null!=this.sublayer.associatedLayer&&await this.sublayer.associatedLayer.load().catch((()=>i.getLogger(this).warn(\"Failed to load associated feature layer. Displaying popup attributes from cached attributes.\"))),this.whenGraphicAttributes(a,Array.from(d)).catch((e=>(n(e),a))).then((e=>s.concat(e))))}async _updateRequiredFields(){const e=y(this.sublayer.fieldsIndex,[...this.sublayer.renderer?await this.sublayer.renderer.getRequiredFields(this.sublayer.fieldsIndex):[],...this.definitionExpressionFields,...this.filterExpressionFields,...this.timeFilterFields]);this._set(\"requiredFields\",e)}_validateFetchPopupFeatures(e){const{sublayer:r}=this,{popupEnabled:i}=r;return i?U(r,e)?void 0:new t(\"buildingscenelayerview3d:fetchPopupFeatures\",\"Layer does not define a popup template\",{sublayer:r}):new t(\"buildingscenelayerview3d:fetchPopupFeatures\",\"Popups are disabled\",{sublayer:r})}getFilters(){const e=super.getFilters();return this.addSqlFilter(e,this.parsedDefinitionExpression,this.logError),this._i3sFilter?.addFilters(e,this.view,this._controller.crsIndex,this._collection),e}createQuery(){const e={outFields:[\"*\"],returnGeometry:!1,outSpatialReference:this.view.spatialReference};return null!=this.filter?this.filter.createQuery(e):new m(e)}queryExtent(e,r){return this._ensureQueryEngine().executeQueryForExtent(this._ensureQuery(e),r?.signal)}queryFeatureCount(e,r){return this._ensureQueryEngine().executeQueryForCount(this._ensureQuery(e),r?.signal)}queryFeatures(e,r){return this._ensureQueryEngine().executeQuery(this._ensureQuery(e),r?.signal).then((e=>{if(!e?.features)return e;const r=this.sublayer,t=r.layer;for(const i of e.features)i.layer=t,i.sourceLayer=r;return e}))}queryObjectIds(e,r){return this._ensureQueryEngine().executeQueryForIds(this._ensureQuery(e),r?.signal)}_ensureQueryEngine(){return null==this._queryEngine&&(this._queryEngine=this._createQueryEngine()),this._queryEngine}_createQueryEngine(){const e=E(this.view.spatialReference,this.view.renderSpatialReference,this._collection);return new x({layerView:this,priority:A.FEATURE_QUERY_ENGINE,spatialIndex:new j({featureAdapter:new S({objectIdField:this.sublayer.objectIdField,attributeStorageInfo:this.sublayer.attributeStorageInfo,getFeatureExtent:e}),forAllFeatures:(e,r)=>this._forAllFeatures(((r,t,i)=>e({id:r,index:t,meta:i})),r,b.QUERYABLE),getFeatureExtent:e,sourceSpatialReference:I(this.sublayer),viewSpatialReference:this.view.spatialReference})})}_ensureQuery(e){return this._addDefinitionExpressionToQuery(null==e?this.createQuery():m.from(e))}};e([u()],C.prototype,\"i3slayer\",null),e([u()],C.prototype,\"layerView\",void 0),e([u()],C.prototype,\"lodFactor\",null),e([u({readOnly:!0})],C.prototype,\"parsedFilterExpressions\",null),e([u({type:h})],C.prototype,\"filter\",null),e([u()],C.prototype,\"_i3sFilter\",void 0),e([u({type:[String],readOnly:!0})],C.prototype,\"filterExpressionFields\",null),e([u({type:[String],readOnly:!0})],C.prototype,\"timeFilterFields\",null),e([u({type:[String],readOnly:!0})],C.prototype,\"requiredFields\",void 0),e([u({type:[String],readOnly:!0})],C.prototype,\"availableFields\",null),C=e([d(\"esri.views.3d.layers.BuildingComponentSublayerView3D\")],C);const O=C;export{O as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import\"../../core/accessorSupport/interfaces.js\";import\"../../core/accessorSupport/tracking/Flags.js\";import\"../../core/Warning.js\";import\"../../core/Error.js\";import e from\"./LayerView.js\";class s extends e{constructor(r){super(r),this.layer=null,this.sublayerViews=null}highlight(r){throw new Error(\"Not implemented\")}}r([o()],s.prototype,\"layer\",void 0),r([o()],s.prototype,\"sublayerViews\",void 0);export{s as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import r from\"../../../Graphic.js\";import s from\"../../../core/Accessor.js\";import{groupToMap as t}from\"../../../core/arrayUtils.js\";import i from\"../../../core/Collection.js\";import{handlesGroup as o}from\"../../../core/handleUtils.js\";import n from\"../../../core/Logger.js\";import{abortMaybe as l}from\"../../../core/maybe.js\";import{isAbortError as a,allSettledValues as u,throwIfAborted as p,createResolver as h}from\"../../../core/promiseUtils.js\";import{watch as c,syncAndInitial as y}from\"../../../core/reactiveUtils.js\";import{property as d}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import{subclass as g}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../layers/buildingSublayers/BuildingGroupSublayer.js\";import f from\"./BuildingComponentSublayerView3D.js\";import{BuildingSublayerView3DMixin as m}from\"./BuildingSublayerView3D.js\";import{LayerView3D as b}from\"./LayerView3D.js\";import{parseFilterMode as w}from\"./i3s/BuildingFilterUtil.js\";import{checkSpatialReference as V}from\"./i3s/I3SUtil.js\";import{updatingProgress as j}from\"../support/updatingProperties.js\";import _ from\"../../layers/BuildingSceneLayerView.js\";const C=m(s);let S=class extends(b(_)){constructor(e){super(e),this.type=\"building-scene-3d\",this.sublayerViews=new i,this._abortController=new AbortController,this._loadingComponents=0,this._pendingWhenSublayerViews=new Map,this.ignoresMemoryFactor=!1}get filterExpression(){const e=this.layer.activeFilterId,r=null!=e?this.layer.filters.find((r=>r.id===e)):null,s=null!=r?r.filterBlocks?.find((e=>\"solid\"===e.filterMode.type)):null;return s?s.filterExpression:null}get filterExpressions(){const e=this.layer.activeFilterId,r=null!=e?this.layer.filters.find((r=>r.id===e)):null;return r?.filterBlocks?r.filterBlocks.toArray().map((e=>[e.filterExpression??\"\",w(e)])):[]}get updatingProgressValue(){const e=this.sublayerViews,r=this._loadingComponents+(e?e.length:0);return e.reduce(((e,r)=>e+r.updatingProgress),0)/r}isUpdating(){return this._loadingComponents>0||this.sublayerViews&&this.sublayerViews.some((e=>e.updating))}initialize(){V(this.layer.spatialReference,this.view.spatialReference,this.view.viewingMode),this._initializeSubLayerViews(this.layer.sublayers,this)}destroy(){this.sublayerViews&&(this.sublayerViews.forEach((e=>e.destroy())),this.sublayerViews=null),this._abortController=l(this._abortController)}_initializeSubLayerViews(e,r){const s=this,t=this.view;e.forEach((e=>{if(!e.isEmpty)if(\"building-group\"===e.type){const s=new C({sublayer:e,view:t,parent:r});this._initializeSubLayerViews(e.sublayers,s)}else\"mesh\"===e.geometryType&&(this._loadingComponents++,e.load({signal:this._abortController.signal}).then((()=>{const i=new f({sublayer:e,layerView:s,view:t,parent:r});this.sublayerViews.push(i);const o=this._pendingWhenSublayerViews.get(e);if(o){for(const e of o)e.resolve(i);this._pendingWhenSublayerViews.delete(e)}this.addHandles([c((()=>i.updating),(()=>this.notifyChange(\"updating\")),y),c((()=>i.updatingProgress),(()=>this.notifyChange(\"updatingProgressValue\")),y)])})).catch((r=>{a(r)||n.getLogger(this).error(`Error while creating view for sublayer ${e.id}\\nLayer: ${this.layer.url}\\n`,r)})).then((()=>{this._loadingComponents--,this.notifyChange(\"updating\"),this.notifyChange(\"updatingProgressValue\")})))}))}getGraphicFromIntersectorTarget(e){for(const r of this.sublayerViews.items)if(r.sublayer.uid===e.sublayerUid)return r.getGraphicFromIntersectorTarget(e);return null}async fetchPopupFeaturesFromGraphics(e,r){if(0===e.length)return[];const s=t(e,(e=>e.sourceLayer)),i=[];for(const[t,n]of s){const e=this._findComponent(t);null!=e&&i.push(e.fetchPopupFeaturesFromGraphics(n,r))}const o=await u(i);return p(r),o.flat()}whenGraphicBounds(e){const r=this._findComponent(e.sourceLayer);return null==r?Promise.reject():r.whenGraphicBounds(e)}getAABBFromIntersectorTarget(e){for(const r of this.sublayerViews.items)if(r.sublayer.uid===e.sublayerUid)return r.getAABBFromIntersectorTarget(e);return null}async whenSublayerView(e){const r=this._findComponent(e);if(null!=r)return r;const s=this._pendingWhenSublayerViews.get(e),t=h();return s?s.push(t):this._pendingWhenSublayerViews.set(e,[t]),t.promise}_findComponent(e){return this.sublayerViews.find((r=>e===r.sublayer))}highlight(e){e instanceof r?e=[e]:e instanceof i&&(e=e.toArray());const s=[];if(Array.isArray(e)&&e.length>0&&e[0]instanceof r){const r=e,t=new Map;for(const e of r){let r=t.get(e.sourceLayer);null==r&&(r=[],t.set(e.sourceLayer,r)),r.push(e)}this.sublayerViews.forEach((e=>{const r=t.get(e.sublayer);r&&s.push(e.highlight(r))}))}return o(s)}get usedMemory(){return this.sublayerViews.reduce(((e,r)=>e+r.usedMemory),0)}get unloadedMemory(){return this.sublayerViews.reduce(((e,r)=>e+r.unloadedMemory),0)}};e([d()],S.prototype,\"sublayerViews\",void 0),e([d({readOnly:!0})],S.prototype,\"filterExpression\",null),e([d({readOnly:!0})],S.prototype,\"filterExpressions\",null),e([d(j)],S.prototype,\"updatingProgress\",void 0),e([d({readOnly:!0,dependsOn:[]})],S.prototype,\"updatingProgressValue\",null),S=e([g(\"esri.views.3d.layers.BuildingSceneLayerView3D\")],S);const B=S;export{B as default};\n"],"names":["E","L","A","j","n","LoadableMixin","l","g","constructor","e","super","this","type","nodePages","materialDefinitions","textureSetDefinitions","geometryDefinitions","indexInfo","serviceUpdateTimeStamp","store","attributeStorageInfo","fields","associatedLayer","outFields","listMode","renderer","definitionExpression","popupEnabled","popupTemplate","layerType","parsedUrl","layer","path","id","query","fieldsIndex","S","readAssociatedLayer","r","t","associatedFeatureServiceItem","o","associatedLayerID","f","portalItem","customParameters","layerId","objectIdField","name","displayField","apiKey","fullExtent","spatialReference","version","elevationInfo","minScale","maxScale","effectiveScaleRange","defaultPopupTemplate","createPopupTemplate","load","signal","_fetchService","then","F","rootNode","p","getLogger","addResolvingPromise","Promise","resolve","q","s","token","responseType","data","read","origin","url","getField","get","getFieldDomain","getFeatureType","feature","domains","domain","types","typeIdField","geometryType","profile","capabilities","v","supportsZ","supportsM","isVersioned","createQuery","T","returnGeometry","returnZ","where","sqlFormat","queryExtent","_getAssociatedLayerForQuery","queryFeatureCount","queryFeatures","features","sourceLayer","queryObjectIds","queryCachedAttributes","I","D","Q","U","queryCachedFeature","length","i","attributes","getFieldUsageInfo","has","supportsLabelingInfo","supportsRenderer","supportsPopupTemplate","supportsLayerQuery","loaded","_loadAssociatedLayerForQuery","error","d","readOnly","prototype","w","x","O","P","String","json","source","y","m","h","R","Number","write","origins","service","value","enabled","allowNull","b","target","u","a","Point","c","_","reader","Array","isArray","map","messages","push","definition","context","sublayers","loadAll","forEachSublayer","sublayersProperty","readSublayers","forEach","title","modelName","isEmpty","legendEnabled","visible","opacity","readTitle","alias","readIdOnlyOnce","ignoreOrigin","Boolean","nonNullable","EventedMixin","sublayer","parent","view","initialize","suspended","canResume","updating","isUpdating","_overrideIfSome","fullOpacity","ready","Solid","WireFrame","XRay","filterMode","mode","edgeMaterial","edges","color","pickable","colorMixMode","Replace","castShadows","lastMaterial","cachedMaterial","arguments","availableFields","filter","Error","highlight","C","layerView","_elevationContext","_isIntegratedMesh","_supportsLabeling","requiredFields","progressiveLoadFactor","_queryEngine","i3slayer","layerUid","uid","sublayerUid","sublayerId","layerPopupEnabledAndHasTemplate","popup","defaultPopupTemplateEnabled","_updatingHandles","add","mergedFilter","checkSupport","_i3sFilter","viewFilter","layerFieldsIndex","loadAsyncModule","_loadAsyncModule","addSqlFilter","logError","addTimeFilter","definitionExpressionFields","filterExpressionFields","timeFilterFields","_updateRequiredFields","_rendererChange","_filterChange","parsedDefinitionExpression","sortedObjectIds","parsedWhereClause","getTimeFilterDependencies","parsedGeometry","spatialRelationship","_geometryFilterChange","parsedFilterExpressions","_updateSymbologyOverride","lodFactor","qualitySettings","sceneService","object","filterExpressions","_ref","create","isStandardized","fieldNames","missingFields","join","_get","_set","_setSymbologyOverride","testFeature","reduce","_ref2","concat","timeExtent","timeInfo","startField","endField","_createLayerGraphic","_controller","rootNodeVisible","fetchPopupFeaturesFromGraphics","_validateFetchPopupFeatures","V","Set","catch","warn","whenGraphicAttributes","from","getRequiredFields","getFilters","addFilters","crsIndex","_collection","outSpatialReference","_ensureQueryEngine","executeQueryForExtent","_ensureQuery","executeQueryForCount","executeQuery","executeQueryForIds","_createQueryEngine","renderSpatialReference","priority","FEATURE_QUERY_ENGINE","spatialIndex","featureAdapter","getFeatureExtent","forAllFeatures","_forAllFeatures","index","meta","QUERYABLE","sourceSpatialReference","viewSpatialReference","_addDefinitionExpressionToQuery","sublayerViews","_abortController","AbortController","_loadingComponents","_pendingWhenSublayerViews","Map","ignoresMemoryFactor","filterExpression","activeFilterId","filters","find","filterBlocks","toArray","updatingProgressValue","updatingProgress","some","viewingMode","_initializeSubLayerViews","destroy","delete","addHandles","notifyChange","getGraphicFromIntersectorTarget","items","_findComponent","flat","whenGraphicBounds","reject","getAABBFromIntersectorTarget","whenSublayerView","set","promise","usedMemory","unloadedMemory","dependsOn","B"],"sourceRoot":""}