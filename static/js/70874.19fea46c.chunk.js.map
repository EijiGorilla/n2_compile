{"version":3,"file":"static/js/70874.19fea46c.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/core/maybeUpdating.js","../node_modules/@arcgis/core/views/3d/layers/I3SPointsWorkerHandle.js","../node_modules/@arcgis/core/views/3d/layers/i3s/I3SGraphicsMap.js","../node_modules/@arcgis/core/views/3d/layers/SceneLayerGraphicsView3D.js","../node_modules/@arcgis/core/views/3d/layers/support/DefinitionExpressionSceneLayerView.js","../node_modules/@arcgis/core/views/3d/layers/support/TemporalSceneLayerView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nconst n=\"updating\";function t(n){return\"updating\"===n?null:n}function u(n){return\"updating\"===n}export{u as isUpdating,t as unwrapUpdating,n as updating};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{WorkerHandle as e}from\"../../../core/workers/WorkerHandle.js\";class r extends e{constructor(e){super(\"SceneLayerWorker\",\"dracoDecompressPointCloudData\",{dracoDecompressPointCloudData:e=>[e.geometryBuffer]},e,{hasInitialize:!0})}}export{r as I3SPointsWorkerHandle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Evented.js\";import{someMap as t}from\"../../../../core/MapUtils.js\";class s extends e{constructor(e,t){super(),this._updateAndCompare=e,this._notifyUpdated=t,this._nodes=new Map,this._graphics=new Map,this._duplicates=new Map}clear(){if(this._graphics.size>0){const e=this.toArray();this._graphics.clear(),this.emit(\"change\",{added:[],removed:e})}this._nodes.clear()}get length(){return this._graphics.size}get(e){return this._graphics.get(e)}getNode(e){return this._nodes.get(e)}hasNode(e){return this._nodes.has(e)}nodes(){return this._nodes.values()}addNode(e,t){this._nodes.set(e,t);const s=t.graphics;if(0===s.length)return;const n=new Set;for(let i=0;i<s.length;i++){const t=s[i],o=t.objectId,r=this._graphics.get(o);if(r){n.add(o),t!==r&&(s[i]=r);const d=this._duplicates.get(o);d?d.push(e):this._duplicates.set(o,[r.nodeIndex,e])}else t.nodeIndex=e,this._graphics.set(o,t)}n.size&&this._updateForeignGraphics(t);const o=n.size>0?s.filter((e=>!n.has(e.objectId))):s;o.length>0&&this.emit(\"change\",{added:o,removed:[]})}removeNode(e){const t=this._nodes.get(e);if(!t)return void console.error(\"Removing unknown node\");this._nodes.delete(e);const s=new Set,n=[];for(const o of t.graphics){const t=o.objectId,i=this._graphics.get(t);if(!i)continue;const r=this._duplicates.get(t);if(r){const n=r.indexOf(e);if(-1===n){console.error(\"error: removing graphic from node that should not reference it.\");continue}if(r.splice(n,1),i.nodeIndex===e){let e=this.getNode(r[0]);for(let t=1;t<r.length;t++){const s=this.getNode(r[t]);(null==e||null!=s&&s.node.level>e.node.level)&&(e=s)}null!=e&&s.add(e)}1===r.length&&this._duplicates.delete(t)}else this._graphics.delete(t),n.push(o)}n.length>0&&this.emit(\"change\",{added:[],removed:n}),s.forEach((e=>this._updateForeignGraphics(e)))}_updateForeignGraphics(e){const t=[],s=e.node.index,n=e.node.level;let o=0;for(;o<e.graphics.length;){const i=e.graphics[o].nodeIndex;if(i===s){o++;continue}let r=1;for(;o+r<e.graphics.length&&e.graphics[o+r].nodeIndex===i;)r++;const d=this.getNode(i);if(null!=d&&d.node.level>n)o+=r;else{for(let n=o;n<o+r;n++){const o=e.graphics[n];o.nodeIndex=s,this._updateAndCompare(o,e,n)&&t.push(o)}o+=r}}this._notifyUpdated(t)}toArray(){return Array.from(this._graphics.values())}find(e){let s;return t(this._graphics,(t=>!!e(t)&&(s=t,!0))),s}forEach(e){this._graphics.forEach((t=>e(t)))}forEachNode(e){this._nodes.forEach(((t,s)=>e(t,s)))}get nodeCount(){return this._nodes.size}_checkInvariants(){const e=new Map;this._nodes.forEach(((t,s)=>{s!==t.node.index&&console.error(\"Mismatched node index\"),t.graphics.forEach((t=>{e.set(t.objectId,1+(e.get(t.objectId)??0));const n=this._duplicates.get(t.objectId);n&&!n.includes(s)&&console.error(\"Node not listed in duplicate list\"),n||t.nodeIndex===s||console.error(\"Unique graphic does not reference owning node index\")}))})),this._graphics.size!==e.size&&console.error(\"Mismatch between actual and expected number of graphics\");let t=0;e.forEach(((e,s)=>{t+=e>1?1:0;const n=this._graphics.get(s);if(!n)return void console.error(\"Missing graphic entry\");const o=this._nodes.get(n.nodeIndex);if(!o)return void console.error(\"Graphic references unkown node\");const i=this._duplicates.get(s);i?(i.length!==e&&console.error(\"Wrong number of entries in duplicate list\"),i.forEach((e=>{const t=this._nodes.get(e);t?t.node.level>o.node.level&&console.error(\"Duplicated graphic does not reference highest level node\"):console.error(\"Unknown node in duplicate list\")}))):e>1&&console.error(\"Missing duplicates entry\")})),this._duplicates.size!==t&&console.error(\"Mismatch between expected and actual number of duplicate entries\")}}export{s as I3SGraphicsMap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../Graphic.js\";import{binaryIndexOf as r}from\"../../../core/arrayUtils.js\";import i from\"../../../core/Logger.js\";import{destroyMaybe as s}from\"../../../core/maybe.js\";import{initial as o,watch as a}from\"../../../core/reactiveUtils.js\";import{estimateSize as n}from\"../../../core/typedArrayUtil.js\";import{property as l}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import{subclass as d}from\"../../../core/accessorSupport/decorators/subclass.js\";import{s as u}from\"../../../chunks/vec32.js\";import{ZEROS as h,create as p}from\"../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{projectBuffer as c}from\"../../../geometry/projection/projectBuffer.js\";import{projectVectorToVector as g}from\"../../../geometry/projection/projectVectorToVector.js\";import{extentContainsCoords3D as m,extentContainsCoords2D as y}from\"../../../geometry/support/contains.js\";import{newDoubleArray as f,doubleArrayFrom as _}from\"../../../geometry/support/DoubleArray.js\";import{getGeometryZScaler as b}from\"../../../geometry/support/zscale.js\";import{fallbackObjectIDAttribute as v}from\"../../../layers/LayerConstants.js\";import{estimateSize as I}from\"../../../layers/graphics/dehydratedFeatures.js\";import{makeDehydratedPoint as x}from\"../../../layers/graphics/dehydratedPoint.js\";import{hydrateGraphic as E}from\"../../../layers/graphics/hydratedFeatures.js\";import w from\"../../../layers/graphics/controllers/I3SOnDemandController.js\";import N from\"../../../layers/support/FeatureFilter.js\";import j from\"../../../rest/support/Query.js\";import{isBasemapLayer as O}from\"../../../support/basemapUtils.js\";import{I3SPointsWorkerHandle as C}from\"./I3SPointsWorkerHandle.js\";import{LayerView3D as D}from\"./LayerView3D.js\";import{Graphics3DFeatureProcessor as S}from\"./graphics/Graphics3DFeatureProcessor.js\";import{QueryEngine as F}from\"./graphics/QueryEngine.js\";import{createInteractiveEditSession as G,normalizeEditResultsEvent as A,processAttributeEdits as P}from\"./i3s/featureEditing.js\";import{I3SGraphicsMap as L}from\"./i3s/I3SGraphicsMap.js\";import{I3SOverrides as V}from\"./i3s/I3SOverrides.js\";import{checkRecyclable as R,checkSpatialReferences as M,containsDraco as H,whenGraphicAttributes as Q,getCachedAttributeValue as U}from\"./i3s/I3SUtil.js\";import{DefinitionExpressionSceneLayerView as q}from\"./support/DefinitionExpressionSceneLayerView.js\";import{defineFieldProperties as T}from\"./support/fieldProperties.js\";import{LayerViewPerformanceInfo as B}from\"./support/LayerViewPerformanceInfo.js\";import{PopupSceneLayerView as k}from\"./support/PopupSceneLayerView.js\";import{SceneLayerViewRequiredFields as z}from\"./support/SceneLayerViewRequiredFields.js\";import{TemporalSceneLayerView as W}from\"./support/TemporalSceneLayerView.js\";import{debugFlags as Z}from\"../support/debugFlags.js\";import{compute as K}from\"../support/orientedBoundingBox.js\";import{updatingProgress as Y}from\"../support/updatingProperties.js\";import{Vertices as $}from\"../webgl-engine/lib/Attribute.js\";import{UpdatePolicy as J}from\"../webgl-engine/lib/UpdatePolicy.js\";import X from\"../../layers/SceneLayerView.js\";import{hasPopupTemplate as ee}from\"../../layers/support/popupUtils.js\";import{TaskPriority as te}from\"../../support/Scheduler.js\";const re=T();class ie{constructor(e,t,r,i){this.graphics=e,this.featureIds=t,this.attributeInfo=r,this.node=i}}let se=class extends(W(q(k(D(X))))){constructor(){super(...arguments),this.type=\"scene-layer-graphics-3d\",this._queryEngine=null,this._memCache=null,this._interactiveEditingSessions=new Map,this._pendingEditsQueue=Promise.resolve(),this.loadedGraphics=new L(((e,t,r)=>le(e,t,r)),(e=>this.processor.graphicsCore.recreateGraphics(e))),this.holeFilling=\"always\",this.progressiveLoadFactor=1,this.supportsHeightUnitConversion=!0,this._coordinatesOutsideExtentErrors=0,this._maxCoordinatesOutsideExtentErrors=20}tryRecycleWith(e,t){return e.url===this.layer.url&&this._i3sOverrides.isEmpty?e.load(t).then((()=>{R(this.layer,e,this._i3sOverrides),this.layer=e,this._i3sOverrides.destroy();const t=this.view.resourceController?.memoryController;this._i3sOverrides=new V({view:this.view,layer:e,memoryController:t}),s(this._queryEngine),this._setupQueryEngine(),this.processor.resetObjectStates()})):null}initialize(){this.addResolvingPromise(this.layer.indexInfo);const e=this.view.resourceController?.memoryController;this._i3sOverrides=new V({view:this.view,layer:this.layer,memoryController:e}),M(this.layer,this.view.spatialReference,this.view.viewingMode),this._fieldsHelper=new z({layerView:this}),this._updatingHandles.add((()=>this.layer.rangeInfos),(e=>this._rangeInfosChanged(e)),o),this._updatingHandles.add((()=>this.layer.renderer),((e,t)=>this._rendererChange(e,t))),this._updatingHandles.add((()=>[this.parsedDefinitionExpression,this._excludeObjectIdsSorted]),(()=>this._filterChange())),this.addHandles(a((()=>Z.I3S_TREE_SHOW_TILES),(e=>{if(e&&!this._treeDebugger){const e=this._controller.crsIndex;import(\"./support/I3STreeDebugger.js\").then((({I3STreeDebugger:t})=>{!this._treeDebugger&&Z.I3S_TREE_SHOW_TILES&&(this._treeDebugger=new t({lv:this,view:this.view,nodeSR:e}))}))}else e||!this._treeDebugger||Z.I3S_TREE_SHOW_TILES||(this._treeDebugger.destroy(),this._treeDebugger=null)}),o)),this._set(\"processor\",new S({owner:this,preferredUpdatePolicy:J.ASYNC,scaleVisibilityEnabled:!0,filterVisibilityEnabled:!0,timeExtentEnabled:!1,frustumVisibilityEnabled:!1,elevationAlignmentEnabled:!0,elevationFeatureExpressionEnabled:!1,setUidToIdOnAdd:!1,dataExtent:this.layer.fullExtent,updateClippingExtent:e=>this._updateClippingExtent(e)})),this.processor.elevationAlignment?.events.on(\"invalidate-elevation\",(({extent:e,spatialReference:t})=>this._controller.updateElevationChanged(e,t))),this.supportsHeightUnitConversion&&(this._verticalScale=b(\"point\",this.layer.spatialReference,this.view.spatialReference)),this.addResolvingPromise(this.processor.initializePromise),this._memCache=this.view.resourceController.memoryController.newCache(`psl-${this.uid}`),this._controller=new w({layerView:this,scaleVisibilityEnabled:!1}),H(this.layer.geometryDefinitions)&&(this._worker=new C((e=>this.view.resourceController.immediate.schedule(e)))),this.addHandles(this.layer.on(\"apply-edits\",(e=>this._updatingHandles.addPromise(e.result)))),this.addHandles(this.layer.on(\"edits\",(e=>{const t=this._pendingEditsQueue.then((()=>this._handleEdits(e))).then();this._pendingEditsQueue=t,this._updatingHandles.addPromise(t)}))),this.when((()=>{this._setupQueryEngine(),this._updatingHandles.add((()=>this.maximumNumberOfFeatures),(e=>this._controller.featureTarget=e),o),this._updatingHandles.add((()=>this.suspended),(e=>{e&&this._removeAllNodeData()}))}))}destroy(){this._treeDebugger=s(this._treeDebugger),this._i3sOverrides=s(this._i3sOverrides),this._set(\"processor\",s(this.processor)),this._controller=s(this._controller),this._queryEngine=s(this._queryEngine),this._worker=s(this._worker),this._memCache=s(this._memCache),this.loadedGraphics.clear(),this._fieldsHelper=s(this._fieldsHelper)}get i3slayer(){return this.layer}get updatingProgressValue(){return this._controller?.updatingProgress??1}get requiredFields(){return this._fieldsHelper?.requiredFields??[]}get maximumNumberOfFeatures(){const e=this.processor?.graphicsCore?.displayFeatureLimit;return e?.maximumNumberOfFeatures??0}set maximumNumberOfFeatures(e){null!=e?(this._override(\"maximumNumberOfFeatures\",e),this._controller.fixedFeatureTarget=!0):(this._clearOverride(\"maximumNumberOfFeatures\"),this._controller.fixedFeatureTarget=!1)}get maximumNumberOfFeaturesExceeded(){return!this.suspended&&(!!this._controller?.useMaximumNumberOfFeatures&&!this._controller.leavesReached)}get _excludeObjectIdsSorted(){const e=this.layer.excludeObjectIds;return e.length?e.toArray().sort(((e,t)=>e-t)):null}get lodFactor(){return\"Labels\"===this.layer.semantic?1:this.view.qualitySettings.sceneService.point.lodFactor}get hasM(){return!1}get hasZ(){return!0}get contentVisible(){return!this.suspended&&!!this._controller?.rootNodeVisible}get legendEnabled(){return this.contentVisible&&!0===this.i3slayer?.legendEnabled}async whenGraphicAttributes(e,t){return Q(this.layer,e,this._getObjectIdField(),t,(()=>[...this.loadedGraphics.nodes()]))}getHit(e){if(!this.loadedGraphics)return null;const t=E(this.loadedGraphics.find((t=>t.uid===e)),this.layer),r=this._getObjectIdField();return t?.attributes?.[r]?(t.layer=this.layer,t.sourceLayer=this.layer,{type:\"graphic\",graphic:t,layer:t.layer}):null}whenGraphicBounds(e,t){return this.processor.whenGraphicBounds(e,t)}computeAttachmentOrigin(e,t){return this.processor.computeAttachmentOrigin(e,t)}isUpdating(){return!!(this._controller?.updating||this.processor?.updating||this._fieldsHelper?.updating||this.layerFilterUpdating)}highlight(e){return this.processor.highlight(e,this.layer.objectIdField)}get updatePolicy(){return this.processor.graphicsCore.effectiveUpdatePolicy}createInteractiveEditSession(e){return G(this._attributeEditingContext,e)}async _decompressBinaryPointData(e,t){const r={geometryBuffer:e.geometryBuffer};null==this._worker&&(this._worker=new C((e=>this.view.resourceController.immediate.schedule(e))));const i=await this._worker.invoke(r,t);if(null==i)throw new Error(\"Failed to decompress Draco point data\");return{positionData:i.positions,featureIds:i.featureIds}}async addNode(e,t,r){if(!ne(t)&&!ae(t))throw new Error;if(this.loadedGraphics.hasNode(e.index))return void i.getLogger(this).error(\"I3S node \"+e.id+\" already added\");const s=null!=this.layer.fullExtent?ue(this.layer.fullExtent.clone(),.5):null,{featureIds:o,pointPositions:a}=ne(t)?await this._extractBinaryPointPositions(e,t,r):this._extractLegacyPointPositions(t),n=new Array;this._validatePositions(e,o,a,s,n);const l=this._controller.crsVertex,d=this.view.spatialReference;c(a,l,0,a,d,0,o.length);const u=ne(t)?e.level:0,h=this._createGraphics(o,a,e.index,u),p=new ie(h,o,t.attributeDataInfo,e);if(await this._i3sOverrides.applyAttributeOverrides(p.featureIds,t.attributeDataInfo,r),e.numFeatures=p.graphics.length,this._updateNodeMemory(e),de(p),n.length>0&&(this._computeObb(e,n,l),this._controller.updateVisibility(e.index)),!this._controller.isGeometryVisible(e))return void this._cacheNodeData(p);if(null!=this._verticalScale)for(const i of p.graphics)this._verticalScale(i.geometry);const g=this.view._stage.renderView.objectAndLayerIdRenderHelper;if(null!=g){const e=O(this.view.map,this.layer.uid);for(let t=0;t<p.featureIds.length;t++){const r=p.featureIds[t];g.setUidToObjectAndLayerId(r,p.graphics[t].uid,this.layer.id,this.layer.uid,this.layer.popupEnabled&&!e&&ee(this.layer,this.view.popup?.defaultPopupTemplateEnabled),p.node.resources.attributes,t)}}this.loadedGraphics.addNode(e.index,p),this._controller.updateLoadStatus(e.index,!0),this._filterNode(p),this._treeDebugger&&this._treeDebugger.update()}_computeObb(e,t,r){const i=this._controller.crsIndex,s=i.isGeographic?this.view.renderSpatialReference:i;c(t,r,0,t,s,0,t.length/3),e.serviceObbInIndexSR=K(new $(t,3)),i.isGeographic&&(g(e.serviceObbInIndexSR.center,s,pe,i),e.serviceObbInIndexSR.center=pe)}isNodeLoaded(e){return this.loadedGraphics.hasNode(e)}isNodeReloading(){return!1}updateNodeState(){}async _extractBinaryPointPositions(e,t,r){const i=await this._decompressBinaryPointData(t,r),s=i.positionData,o=3,a=s.length/o,n=f(3*a),l=null!=e.serviceObbInIndexSR?e.serviceObbInIndexSR.center:h,d=Math.abs(l[2])*2**-20;for(let u=0;u<a;u++){const e=u*o;n[e]=s[e]+l[0],n[e+1]=s[e+1]+l[1],n[e+2]=s[e+2]+l[2],Math.abs(n[e+2])<d&&(n[e+2]=0)}return{featureIds:i.featureIds?_(i.featureIds):[],pointPositions:n}}_extractLegacyPointPositions(e){const t=e.pointData.length,r=f(3*t),i=new Array;for(let s=0;s<t;s++){const t=e.pointData[s],o=t.featureDataPosition,a=o.length,n=t.geometries?.[0]??he[a],l=t.featureIds[0];if(\"Embedded\"!==n.type||\"points\"!==n.params.type||a<2||a>3)continue;const d=n.params.vertexAttributes?.position??[0,0,0],u=3*i.length;r[u]=o[0]+d[0],r[u+1]=o[1]+d[1],r[u+2]=3===a?o[2]+d[2]:NaN,i.push(l)}return{featureIds:i,pointPositions:r}}_validatePositions(e,t,r,s,o){if(null==s&&e.serviceObbInIndexSR)return;const a=t.length,n=3;for(let l=0;l<a;l++){const t=l*n;u(pe,r[t],r[t+1],r[t+2]);const a=!Number.isNaN(r[2]);null==s||(a?m(s,pe):y(s,pe))||(this._coordinatesOutsideExtentErrors<this._maxCoordinatesOutsideExtentErrors&&i.getLogger(this).error(\"Service Error: Coordinates outside of layer extent\"),this._coordinatesOutsideExtentErrors+1===this._maxCoordinatesOutsideExtentErrors&&i.getLogger(this).error(\"Maximum number of errors reached. Further errors are ignored.\"),this._coordinatesOutsideExtentErrors++),e.serviceObbInIndexSR||o.push(pe[0],pe[1],pe[2])}}_createGraphics(e,r,i,s){const o=e.length,a=3,n=this._getObjectIdField(),l=this.processor.graphicsCore,d=new Array,u=this.view.spatialReference;for(let h=0;h<o;h++){const o=e[h],p={};null!=o&&(p[n]=o);const c=o??t.generateUID(),g=h*a,m=isNaN(r[g+2])?void 0:r[g+2],y=x(r[g],r[g+1],m,u),f=this.loadedGraphics.get(c);if(null!=f)(null==f.level||f.level<s)&&(ce.property=\"geometry\",ce.graphic=f,ce.oldValue=f.geometry,ce.newValue=y,f.geometry=y,f.level=s,l.graphicUpdateHandler(ce)),d.push(f);else{const e=t.generateUID();d.push({objectId:c,uid:e,geometry:y,attributes:p,visible:!0,nodeIndex:i,level:s})}}return d}_updateNodeMemory(e){e.memory=4096+(null!=e.numFeatures?e.numFeatures*this.processor.graphicsCore.usedMemoryPerGraphic:0)}_cacheNodeData(e){const t=e.graphics.reduce(((e,t)=>I(t)+e),n(e.featureIds)+1024);this._memCache.put(this._getMemCacheKey(e.node),e,t)}_getMemCacheKey(e){return`${e.index}`}_removeAllNodeData(){this.loadedGraphics.forEachNode(((e,t)=>{if(e){const t=e.node;this._updateNodeMemory(t),this._cacheNodeData(e)}this._controller.updateLoadStatus(t,!1)})),this._treeDebugger&&this._treeDebugger.update(),this.loadedGraphics.clear()}removeNode(e){const t=this._removeNodeStageData(e);t&&(this._updateNodeMemory(t.node),this._cacheNodeData(t))}_removeNodeStageData(e){const t=this.loadedGraphics.getNode(e);return null==t?null:(this._controller.updateLoadStatus(e,!1),this.loadedGraphics.removeNode(e),this._treeDebugger&&this._treeDebugger.update(),t)}async loadCachedNodeData(e){return this._memCache?.pop(this._getMemCacheKey(e))}async addCachedNodeData(e,t,r,s){this.loadedGraphics.hasNode(e.index)?i.getLogger(this).error(\"I3S node \"+e.id+\" already added\"):(await this._i3sOverrides.applyAttributeOverrides(t.featureIds,r,s),this.loadedGraphics.addNode(e.index,t),this._controller.updateLoadStatus(e.index,!0),this._updateNodeMemory(e),t.attributeInfo=r,this._attributeValuesChanged(t),this._filterNode(t),this._treeDebugger&&this._treeDebugger.update())}getLoadedNodeIds(){const e=[];return this.loadedGraphics.forEachNode((t=>e.push(t.node.id))),e.sort()}getVisibleNodes(){const e=new Array;return this.loadedGraphics.forEachNode((t=>e.push(t.node))),e}getLoadedNodeIndices(e){this.loadedGraphics.forEachNode(((t,r)=>e.push(r)))}getLoadedAttributes(e){const t=this.loadedGraphics.getNode(e);if(null!=t?.attributeInfo)return t.attributeInfo.loadedAttributes}getAttributeData(e){const t=this.loadedGraphics.getNode(e);if(null!=t?.attributeInfo)return t.attributeInfo.attributeData}_setAttributeData(e,t){const r=this.loadedGraphics.getNode(e);null!=r?.attributeInfo&&(r.attributeInfo.attributeData=t,this._attributeValuesChanged(r))}async updateAttributes(e,t,r){const i=this.loadedGraphics.getNode(e);null!=i&&(await this._i3sOverrides.applyAttributeOverrides(i.featureIds,t,r),i.attributeInfo=t,this._attributeValuesChanged(i))}_attributeValuesChanged(e){if(de(e),this._filterNode(e),this.processor.graphicsCore.labelsEnabled){const t=e.graphics.map((e=>e.uid));this.processor.graphicsCore.updateLabelingInfo(t)}}_updateClippingExtent(e){return this._controller&&this._controller.updateClippingArea(e),!1}_getObjectIdField(){return this.layer.objectIdField||v}_getGlobalIdField(){return this.layer.associatedLayer?.globalIdField}async _rendererChange(e,t){const{layer:{fieldsIndex:r}}=this,i=new Set;let s,o;e?(await e.collectRequiredFields(i,r),s=Array.from(i).sort()):s=[],i.clear(),t?(await t.collectRequiredFields(i,r),o=Array.from(i).sort()):o=[],s.length===o.length&&s.every(((e,t)=>s[t]===o[t]))||this._reloadAllNodes()}_rangeInfosChanged(e){null!=e&&e.length>0&&i.getLogger(this).warn(\"Unsupported property: rangeInfos are currently only serialized to and from web scenes but do not affect rendering.\")}_filterChange(){this.loadedGraphics.forEachNode((e=>this._filterNode(e)))}_reloadAllNodes(){this._removeAllNodeData(),this._controller&&this._controller.restartNodeLoading()}_filterNode(e){const t=this.parsedDefinitionExpression,i=this._excludeObjectIdsSorted,s=this._getObjectIdField();for(const o of e.graphics){const e=o.visible,a=!t||this._evaluateClause(t,o),n=null==i||r(i,o.attributes[s])<0;o.visible=a&&n,e!==o.visible&&(ce.graphic=o,ce.property=\"visible\",ce.oldValue=e,ce.newValue=o.visible,this.processor.graphicsCore.graphicUpdateHandler(ce))}}createQuery(){const e={outFields:[\"*\"],returnGeometry:!0,outSpatialReference:this.view.spatialReference};return null!=this.filter?this.filter.createQuery(e):new j(e)}queryFeatures(e,t){return this._queryEngine.executeQuery(this._ensureQuery(e),t?.signal)}queryObjectIds(e,t){return this._queryEngine.executeQueryForIds(this._ensureQuery(e),t?.signal)}queryFeatureCount(e,t){return this._queryEngine.executeQueryForCount(this._ensureQuery(e),t?.signal)}queryExtent(e,t){return this._queryEngine.executeQueryForExtent(this._ensureQuery(e),t?.signal)}_ensureQuery(e){return this._addDefinitionExpressionToQuery(null==e?this.createQuery():j.from(e))}_setupQueryEngine(){const e=()=>this.processor.featureStore;this._queryEngine=new F({context:{spatialReference:this.view.spatialReference,layer:this.layer,scheduler:this.view.resourceController.scheduler,get featureStore(){return e()},hasZ:this.hasZ,hasM:this.hasM},priority:te.FEATURE_QUERY_ENGINE})}get usedMemory(){return this.processor?.graphicsCore?.usedMemory??0}get unloadedMemory(){return.8*((this._controller?.unloadedMemoryEstimate??0)+(this.processor?.graphicsCore?.unprocessedMemoryEstimate??0))}get ignoresMemoryFactor(){return this._controller&&this._controller.fixedFeatureTarget}async _handleEdits(e){const t=this._attributeEditingContext,r=await A(t,e);P(t,r)}get _attributeEditingContext(){const e=this._getObjectIdField(),t=this._getGlobalIdField();return{sessions:this._interactiveEditingSessions,fieldsIndex:this.layer.fieldsIndex,objectIdField:e,globalIdField:t,forEachNode:e=>this.loadedGraphics.forEachNode((t=>e(t.node,t.featureIds))),attributeStorageInfo:this.i3slayer.attributeStorageInfo??[],i3sOverrides:this._i3sOverrides,getAttributeData:e=>this.getAttributeData(e),setAttributeData:(t,r,i)=>{this._setAttributeData(t,r);const s=this.loadedGraphics.getNode(t);if(null!=i){const t=this.loadedGraphics.get(i.attributes[e]);null!=t&&this.processor.graphicsCore.recreateGraphics([t])}else null!=s&&this.processor.graphicsCore.recreateGraphics(s.graphics)},clearMemCache:()=>{}}}get performanceInfo(){return new B(this.usedMemory,this.loadedGraphics.length,-1,this.maximumNumberOfFeatures,this.loadedGraphics.nodeCount,this.processor.graphicsCore.performanceInfo)}get test(){return{controller:this._controller,numNodes:this.loadedGraphics.nodeCount,loadedGraphics:this.loadedGraphics}}};e([l()],se.prototype,\"processor\",void 0),e([l({type:N})],se.prototype,\"filter\",void 0),e([l()],se.prototype,\"loadedGraphics\",void 0),e([l()],se.prototype,\"i3slayer\",null),e([l()],se.prototype,\"_controller\",void 0),e([l()],se.prototype,\"updating\",void 0),e([l()],se.prototype,\"suspended\",void 0),e([l()],se.prototype,\"holeFilling\",void 0),e([l(Y)],se.prototype,\"updatingProgress\",void 0),e([l()],se.prototype,\"updatingProgressValue\",null),e([l(re.requiredFields)],se.prototype,\"requiredFields\",null),e([l(re.availableFields)],se.prototype,\"availableFields\",void 0),e([l()],se.prototype,\"_fieldsHelper\",void 0),e([l({type:Number})],se.prototype,\"maximumNumberOfFeatures\",null),e([l({readOnly:!0})],se.prototype,\"maximumNumberOfFeaturesExceeded\",null),e([l()],se.prototype,\"_excludeObjectIdsSorted\",null),e([l({readOnly:!0})],se.prototype,\"lodFactor\",null),e([l({readOnly:!0})],se.prototype,\"hasM\",null),e([l({readOnly:!0})],se.prototype,\"hasZ\",null),e([l()],se.prototype,\"contentVisible\",null),e([l({readOnly:!0})],se.prototype,\"legendEnabled\",null),se=e([d(\"esri.views.3d.layers.SceneLayerGraphicsView3D\")],se);const oe=se;function ae(e){return\"pointData\"in e}function ne(e){return\"geometryBuffer\"in e&&null!==e.geometryBuffer}function le(e,t,r){const i=t.attributeInfo;if(null==i?.loadedAttributes||null==i.attributeData)return!1;let s=!1;for(const{name:o}of i.loadedAttributes)if(i.attributeData[o]){const t=U(i.attributeData[o],r);t!==e.attributes[o]&&(e.attributes[o]=t,s=!0)}return s}function de(e){const t=e.attributeInfo,r=e.node.index;if(null!=t?.loadedAttributes&&null!=t.attributeData)for(let i=0;i<e.graphics.length;i++){const s=e.graphics[i];if(s.nodeIndex===r){s.attributes||(s.attributes={});for(const{name:e}of t.loadedAttributes)t.attributeData[e]&&(s.attributes[e]=U(t.attributeData[e],i))}}}function ue(e,t){return e.xmin-=t,e.ymin-=t,e.xmax+=t,e.ymax+=t,null!=e.zmin&&null!=e.zmax&&(e.zmin-=t,e.zmax+=t),null!=e.mmin&&null!=e.mmax&&(e.mmin-=t,e.mmax+=t),e}const he={2:{type:\"Embedded\",params:{type:\"points\",vertexAttributes:{position:[0,0]}}},3:{type:\"Embedded\",params:{type:\"points\",vertexAttributes:{position:[0,0,0]}}}},pe=p(),ce={graphic:null,property:null,oldValue:null,newValue:null};export{oe as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../../chunks/tslib.es6.js\";import i from\"../../../../core/Logger.js\";import{property as e}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/RandomLCG.js\";import{subclass as s}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{WhereClause as o}from\"../../../../core/sql/WhereClause.js\";import{findFieldsCaseInsensitive as n}from\"../i3s/I3SUtil.js\";const t=t=>{let p=class extends t{constructor(){super(...arguments),this._definitionExpressionErrors=0,this._maxDefinitionExpressionErrors=20,this.logError=r=>{this._definitionExpressionErrors<this._maxDefinitionExpressionErrors&&i.getLogger(this).error(\"Error while evaluating definitionExpression: \"+r),this._definitionExpressionErrors++,this._definitionExpressionErrors===this._maxDefinitionExpressionErrors&&i.getLogger(this).error(\"Further errors are ignored\")}}get parsedDefinitionExpression(){if(!this.i3slayer?.definitionExpression)return null;try{const r=o.create(this.i3slayer.definitionExpression,this.i3slayer.fieldsIndex);if(!r.isStandardized)return i.getLogger(this).error(\"definitionExpression is using non standard function\"),null;const e=[],s=r.fieldNames;return n(s,this.i3slayer.fields,{missingFields:e}),e.length>0?(i.getLogger(this).error(`definitionExpression references unknown fields: ${e.join(\", \")}`),null):(this._definitionExpressionErrors=0,r)}catch(r){return i.getLogger(this).error(\"Failed to parse definitionExpression: \"+r),null}}get definitionExpressionFields(){return this.parsedDefinitionExpression?this.parsedDefinitionExpression.fieldNames:[]}_evaluateClause(r,i){try{return r.testFeature(i)}catch(e){return this.logError(e),!1}}_addDefinitionExpressionToQuery(r){if(!this.parsedDefinitionExpression)return r;const i=this.i3slayer.definitionExpression,e=r.clone();return e.where?e.where=`(${i}) AND (${e.where})`:e.where=i,e}};return r([e({readOnly:!0})],p.prototype,\"parsedDefinitionExpression\",null),r([e({readOnly:!0})],p.prototype,\"definitionExpressionFields\",null),p=r([s(\"esri.views.3d.layers.support.DefinitionExpressionSceneLayerView\")],p),p};export{t as DefinitionExpressionSceneLayerView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import{property as e}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as r}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{getTimeOperator as i}from\"../../../../layers/graphics/data/timeSupport.js\";import{combinedViewLayerTimeExtentProperty as s}from\"../../../../layers/support/commonProperties.js\";import o from\"../../../../layers/support/FeatureFilter.js\";import{filterInPlace as n,getCachedAttributeValue as l}from\"../i3s/I3SUtil.js\";const u=l=>{let u=class extends l{constructor(){super(...arguments),this.timeExtent=null}get mergedFilter(){const{filter:t,timeExtent:e}=this;if(null==e)return t;const r=t?.clone()??new o;return null!=e&&(r.timeExtent=r.timeExtent?.intersection(e)??e),r}getTimeFilterDependencies(){const{timeInfo:t}=this.i3slayer;if(null==t)return[];const{startField:e,endField:r}=t;return[e,r]}addTimeFilter(t,e){if(null==e)return;const{timeInfo:r}=this.i3slayer;if(null==r)return;const{startField:i,endField:s,useTime:o}=r;if(!o||null==i&&null==s)return;const n=r.toJSON(),l=e.toJSON();t.push(((t,e)=>this._timeFilter(t,e,n,l)))}_timeFilter(t,e,r,s){const o=e.attributeInfo?.attributeData;if(null==o)return;const{startTimeField:l,endTimeField:u}=r;if(!!(null!=l&&null==o[l]||null!=u&&null==o[u]))return;const a=i(r,s,new m(o));if(null==a)return;const{featureIds:c}=e;n(t,c,a)}};return t([e(s)],u.prototype,\"timeExtent\",void 0),t([e()],u.prototype,\"mergedFilter\",null),u=t([r(\"esri.views.3d.layers.support.TemporalSceneLayerView\")],u),u};class m{constructor(t){this.attributeData=t}getAttribute(t,e){return l(this.attributeData[e],t)}getAttributeAsTimestamp(t,e){const r=this.getAttribute(t,e);return\"string\"==typeof r?new Date(r).getTime():\"number\"==typeof r||null==r?r:null}}export{u as TemporalSceneLayerView};\n"],"names":["n","t","u","r","e","constructor","super","dracoDecompressPointCloudData","geometryBuffer","hasInitialize","s","this","_updateAndCompare","_notifyUpdated","_nodes","Map","_graphics","_duplicates","clear","size","toArray","emit","added","removed","length","get","getNode","hasNode","has","nodes","values","addNode","set","graphics","Set","i","o","objectId","add","d","push","nodeIndex","_updateForeignGraphics","filter","removeNode","console","error","delete","indexOf","splice","node","level","forEach","index","Array","from","find","forEachNode","nodeCount","_checkInvariants","includes","re","T","ie","featureIds","attributeInfo","se","W","q","k","D","X","arguments","type","_queryEngine","_memCache","_interactiveEditingSessions","_pendingEditsQueue","Promise","resolve","loadedGraphics","L","loadedAttributes","attributeData","name","U","attributes","le","processor","graphicsCore","recreateGraphics","holeFilling","progressiveLoadFactor","supportsHeightUnitConversion","_coordinatesOutsideExtentErrors","_maxCoordinatesOutsideExtentErrors","tryRecycleWith","url","layer","_i3sOverrides","isEmpty","load","then","R","destroy","view","resourceController","memoryController","V","_setupQueryEngine","resetObjectStates","initialize","addResolvingPromise","indexInfo","M","spatialReference","viewingMode","_fieldsHelper","z","layerView","_updatingHandles","rangeInfos","_rangeInfosChanged","renderer","_rendererChange","parsedDefinitionExpression","_excludeObjectIdsSorted","_filterChange","addHandles","a","Z","I3S_TREE_SHOW_TILES","_treeDebugger","_controller","crsIndex","_ref","I3STreeDebugger","lv","nodeSR","_set","S","owner","preferredUpdatePolicy","J","ASYNC","scaleVisibilityEnabled","filterVisibilityEnabled","timeExtentEnabled","frustumVisibilityEnabled","elevationAlignmentEnabled","elevationFeatureExpressionEnabled","setUidToIdOnAdd","dataExtent","fullExtent","updateClippingExtent","_updateClippingExtent","elevationAlignment","events","on","_ref2","extent","updateElevationChanged","_verticalScale","b","initializePromise","newCache","uid","w","H","geometryDefinitions","_worker","C","immediate","schedule","addPromise","result","_handleEdits","when","maximumNumberOfFeatures","featureTarget","suspended","_removeAllNodeData","i3slayer","updatingProgressValue","updatingProgress","requiredFields","displayFeatureLimit","_override","fixedFeatureTarget","_clearOverride","maximumNumberOfFeaturesExceeded","useMaximumNumberOfFeatures","leavesReached","excludeObjectIds","sort","lodFactor","semantic","qualitySettings","sceneService","point","hasM","hasZ","contentVisible","rootNodeVisible","legendEnabled","whenGraphicAttributes","Q","_getObjectIdField","getHit","E","sourceLayer","graphic","whenGraphicBounds","computeAttachmentOrigin","isUpdating","updating","layerFilterUpdating","highlight","objectIdField","updatePolicy","effectiveUpdatePolicy","createInteractiveEditSession","G","_attributeEditingContext","_decompressBinaryPointData","invoke","Error","positionData","positions","ne","ae","getLogger","id","xmin","ymin","xmax","ymax","zmin","zmax","mmin","mmax","ue","clone","pointPositions","_extractBinaryPointPositions","_extractLegacyPointPositions","_validatePositions","l","crsVertex","c","h","_createGraphics","p","attributeDataInfo","applyAttributeOverrides","numFeatures","_updateNodeMemory","de","_computeObb","updateVisibility","isGeometryVisible","_cacheNodeData","geometry","g","_stage","renderView","objectAndLayerIdRenderHelper","O","map","setUidToObjectAndLayerId","popupEnabled","ee","popup","defaultPopupTemplateEnabled","resources","updateLoadStatus","_filterNode","update","isGeographic","renderSpatialReference","serviceObbInIndexSR","K","$","center","pe","isNodeLoaded","isNodeReloading","updateNodeState","f","Math","abs","_","pointData","featureDataPosition","geometries","he","params","vertexAttributes","position","NaN","Number","isNaN","m","y","generateUID","x","ce","property","oldValue","newValue","graphicUpdateHandler","visible","memory","usedMemoryPerGraphic","reduce","I","put","_getMemCacheKey","_removeNodeStageData","loadCachedNodeData","pop","addCachedNodeData","_attributeValuesChanged","getLoadedNodeIds","getVisibleNodes","getLoadedNodeIndices","getLoadedAttributes","getAttributeData","_setAttributeData","updateAttributes","labelsEnabled","updateLabelingInfo","updateClippingArea","v","_getGlobalIdField","associatedLayer","globalIdField","fieldsIndex","collectRequiredFields","every","_reloadAllNodes","warn","restartNodeLoading","_evaluateClause","createQuery","outFields","returnGeometry","outSpatialReference","j","queryFeatures","executeQuery","_ensureQuery","signal","queryObjectIds","executeQueryForIds","queryFeatureCount","executeQueryForCount","queryExtent","executeQueryForExtent","_addDefinitionExpressionToQuery","featureStore","F","context","scheduler","priority","te","FEATURE_QUERY_ENGINE","usedMemory","unloadedMemory","unloadedMemoryEstimate","unprocessedMemoryEstimate","ignoresMemoryFactor","A","P","sessions","attributeStorageInfo","i3sOverrides","setAttributeData","clearMemCache","performanceInfo","B","test","controller","numNodes","prototype","N","Y","availableFields","readOnly","oe","_definitionExpressionErrors","_maxDefinitionExpressionErrors","logError","definitionExpression","create","isStandardized","fieldNames","fields","missingFields","join","definitionExpressionFields","testFeature","where","timeExtent","mergedFilter","intersection","getTimeFilterDependencies","timeInfo","startField","endField","addTimeFilter","useTime","toJSON","_timeFilter","startTimeField","endTimeField","getAttribute","getAttributeAsTimestamp","Date","getTime"],"sourceRoot":""}